<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Greater Love TV - Roku TV Simulator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #0F1419;
            color: white;
            overflow: hidden;
            height: 100vh;
            cursor: none;
        }

        .app-container {
            display: flex;
            width: 100vw;
            height: 100vh;
        }

        .app-screen {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: #0F1419;
            position: relative;
        }

        .header {
            background: #000000;
            height: 80px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 60px;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo img {
            height: 50px;
        }

        .logo-text {
            font-size: 24px;
            font-weight: bold;
            color: #DC143C;
        }

        .nav-menu {
            display: flex;
            gap: 20px;
        }

        .nav-item {
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .nav-item.active {
            background: #DC143C;
        }

        .nav-item:hover {
            background: #DC143C;
        }

        .content-container {
            flex: 1;
            padding: 40px 60px;
            overflow-y: auto;
        }

        .section {
            margin-bottom: 40px;
        }

        .section-title {
            font-size: 28px;
            font-weight: bold;
            margin-bottom: 20px;
            color: white;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .carousel {
            display: flex;
            gap: 20px;
            overflow-x: auto;
            padding-bottom: 10px;
        }

        .carousel::-webkit-scrollbar {
            height: 6px;
        }

        .carousel::-webkit-scrollbar-track {
            background: #333;
        }

        .carousel::-webkit-scrollbar-thumb {
            background: #DC143C;
            border-radius: 3px;
        }

        .card {
            min-width: 280px;
            height: 160px;
            border-radius: 8px;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            border: 3px solid transparent;
        }

        .card:hover,
        .card.focused {
            transform: scale(1.05);
            border-color: #DC143C;
            box-shadow: 0 8px 25px rgba(220, 20, 60, 0.4);
        }

        .card img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .card-content {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(transparent, rgba(0,0,0,0.8));
            padding: 20px 15px 15px;
        }

        .card-title {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .card-description {
            font-size: 12px;
            color: #ccc;
        }

        .live-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #DC143C;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 10px;
            font-weight: bold;
        }

        .remote-control {
            width: 250px;
            background: #2A2A2A;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            border-left: 2px solid #444;
        }

        .remote-title {
            color: #DC143C;
            font-size: 14px;
            font-weight: bold;
            margin-bottom: 20px;
            text-align: center;
        }

        .d-pad {
            position: relative;
            width: 120px;
            height: 120px;
            margin-bottom: 20px;
        }

        .remote-btn {
            position: absolute;
            background: #444;
            border: 2px solid #666;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 12px;
            font-weight: bold;
        }

        .remote-btn:hover {
            background: #666;
        }

        .remote-btn.up { top: 0; left: 40px; width: 40px; height: 30px; border-radius: 15px 15px 5px 5px; }
        .remote-btn.down { bottom: 0; left: 40px; width: 40px; height: 30px; border-radius: 5px 5px 15px 15px; }
        .remote-btn.left { left: 0; top: 40px; width: 30px; height: 40px; border-radius: 15px 5px 5px 15px; }
        .remote-btn.right { right: 0; top: 40px; width: 30px; height: 40px; border-radius: 5px 15px 15px 5px; }
        .remote-btn.ok { top: 40px; left: 40px; width: 40px; height: 40px; border-radius: 50%; background: #DC143C; border-color: #DC143C; }

        .control-buttons {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .control-btn {
            background: #444;
            border: 1px solid #666;
            color: white;
            padding: 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.2s;
        }

        .control-btn:hover { background: #666; }
        .control-btn.home { background: #DC143C; border-color: #DC143C; }
        .control-btn.back { background: #DC2626; }

        .status-display {
            margin-top: 20px;
            padding: 15px;
            background: rgba(0,0,0,0.8);
            border-radius: 6px;
            font-size: 12px;
        }

        .status-display h4 {
            color: #DC143C;
            margin-bottom: 10px;
        }

        .api-status {
            margin: 5px 0;
        }

        .api-status.success { color: #10B981; }
        .api-status.error { color: #EF4444; }
        .api-status.pending { color: #F59E0B; }

        .video-player-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: #000;
            display: none;
            z-index: 3000;
            flex-direction: column;
        }

        .video-player-overlay.active {
            display: flex;
        }

        .video-player-header {
            background: rgba(0, 0, 0, 0.8);
            padding: 20px;
            display: flex;
            align-items: center;
            gap: 20px;
            position: relative;
            z-index: 3001;
        }

        .video-back-button {
            background: #DC143C;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            font-size: 14px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .video-title {
            color: white;
            font-size: 24px;
            font-weight: bold;
            margin: 0;
        }

        .video-container {
            flex: 1;
            position: relative;
            background: #000;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .video-player {
            width: 100%;
            height: 100%;
            background: #000;
        }

        .video-player iframe {
            width: 100%;
            height: 100%;
            border: none;
        }

        .video-loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-size: 18px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 3px solid #333;
            border-top: 3px solid #DC143C;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .live-indicator {
            background: #DC143C;
            color: white;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .live-dot {
            width: 8px;
            height: 8px;
            background: white;
            border-radius: 50%;
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.3; }
            100% { opacity: 1; }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <div class="app-screen">
            <div class="header">
                <div class="logo">
                    <img src="../images/app_logo.png" alt="Greater Love Network" onerror="this.style.display='none'">
                    <div class="logo-text">GREATER LOVE NETWORK</div>
                </div>
                <div class="nav-menu">
                    <div class="nav-item active">HOME</div>
                    <div class="nav-item">ABOUT US</div>
                    <div class="nav-item">ALL SHOWS</div>
                    <div class="nav-item">INFO</div>
                </div>
            </div>

            <div class="content-container">
                <!-- Live Streams Section -->
                <div class="section">
                    <div class="section-title">üî¥ Live Streams</div>
                    <div class="carousel" id="liveStreamsCarousel">
                        <!-- Live streams will be loaded here -->
                    </div>
                </div>

                <!-- Premium Shows Section -->
                <div class="section">
                    <div class="section-title">‚≠ê Premium Shows</div>
                    <div class="carousel" id="premiumShowsCarousel">
                        <!-- Premium shows will be loaded here -->
                    </div>
                </div>

                <!-- All Shows Section -->
                <div class="section">
                    <div class="section-title">üì∫ All Shows & Episodes</div>
                    <div class="carousel" id="showsCarousel">
                        <!-- Shows will be loaded here -->
                    </div>
                </div>
            </div>
        </div>

        <div class="remote-control">
            <div class="remote-title">Roku Remote Simulator</div>

            <div class="d-pad">
                <button class="remote-btn up" onclick="handleRemoteKey('ArrowUp')">‚Üë</button>
                <button class="remote-btn down" onclick="handleRemoteKey('ArrowDown')">‚Üì</button>
                <button class="remote-btn left" onclick="handleRemoteKey('ArrowLeft')">‚Üê</button>
                <button class="remote-btn right" onclick="handleRemoteKey('ArrowRight')">‚Üí</button>
                <button class="remote-btn ok" onclick="handleRemoteKey('Enter')">OK</button>
            </div>

            <div class="control-buttons">
                <button class="control-btn home" onclick="handleRemoteKey('Home')">üè† Home</button>
                <button class="control-btn back" onclick="handleRemoteKey('Escape')">‚Üê Back</button>
                <button class="control-btn" onclick="handleRemoteKey(' ')">‚ñ∂Ô∏è Play</button>
                <button class="control-btn" onclick="loadRealData()">üîÑ Reload API</button>
                <button class="control-btn" onclick="debugAPIData()">üêõ Debug API</button>
            </div>

            <div class="status-display">
                <h4>API Status</h4>
                <div class="api-status" id="apiStatus">Ready to test</div>
                <div class="api-status" id="showCount">Shows: 0</div>
                <div class="api-status" id="streamCount">Streams: 0</div>
            </div>
        </div>
    </div>

    <!-- Video Player Overlay -->
    <div class="video-player-overlay" id="videoPlayerOverlay">
        <div class="video-player-header">
            <button class="video-back-button" onclick="closeVideoPlayer()">‚Üê Back</button>
            <div>
                <h2 class="video-title" id="videoTitle">Loading...</h2>
            </div>
            <div class="live-indicator" id="liveIndicator" style="display: none;">
                <div class="live-dot"></div>
                LIVE
            </div>
        </div>

        <div class="video-container">
            <div class="video-player" id="videoPlayer">
                <!-- Video content will be loaded here -->
            </div>

            <div class="video-loading" id="videoLoading">
                <div class="spinner"></div>
                <span>Loading stream...</span>
            </div>
        </div>
    </div>

    <script>
        // API Configuration - YOUR EXACT CREDENTIALS
        const API_BASE = 'https://api.castr.com/v2';
        const ACCESS_TOKEN = '5aLoKjrNjly4';
        const SECRET_KEY = 'UjTCq8wOj76vjXznGFzdbMRzAkFq6VlJElBQ';
        const AUTH_HEADER = 'Basic ' + btoa(ACCESS_TOKEN + ':' + SECRET_KEY);

        // App State
        let shows = [];
        let liveStreams = [];
        let currentFocus = 0;
        let focusableElements = [];
        let currentVideo = null;

        // Initialize the simulator
        function init() {
            console.log('üöÄ Initializing Greater Love TV Simulator');
            setupKeyboardControls();
            loadRealData();
            updateFocus();
        }

        // Load real data from your API
        async function loadRealData() {
            setApiStatus('pending', 'Loading your live API data...');

            // YOUR EXACT LIVE API RESPONSE DATA
            const realApiData = {
                "total": 51,
                "page": 1,
                "pages": 6,
                "docs": [
                    {
                        "_id": "68c8658499f4460b5b52dd6b",
                        "name": "Kevin Wallace Ministries",
                        "enabled": true,
                        "type": "vod",
                        "data": [],
                        "user": "68652a3418bba63c0f32a04d",
                        "creation_time": "2025-09-15T19:14:12.982Z"
                    },
                    {
                        "_id": "68c81d7ea07fbf0b6d5dd2dc",
                        "name": "Touched By The Truth",
                        "enabled": true,
                        "type": "vod",
                        "data": [
                            {
                                "enabled": true,
                                "id": "GLdnrdoMrTyZifeG.mp4",
                                "fileName": "Surviving The Transitional Place.mp4",
                                "bytes": 649086673,
                                "mediaInfo": {"hasAudioTrack": true, "isVbr": false, "duration": 1710, "width": 1920, "height": 1080, "fps": 30, "codecs": [{"type": "video", "codec": "AVC"}, {"type": "audio", "codec": "AAC"}], "durationMins": 29},
                                "encodingRequired": false, "precedence": 1, "author": "angel@oasisministries.com", "creationTime": "2025-09-15T17:50:53.228Z", "_id": "68c851fdf41b250b0f90db07",
                                "playback": {"embed_url": "https://player.castr.com/vod/GLdnrdoMrTyZifeG"}
                            },
                            {
                                "enabled": true,
                                "id": "UbhaEq07jrB3xjic.mp4",
                                "fileName": "Acts Chapter 8.mp4",
                                "bytes": 1218106093,
                                "mediaInfo": {"hasAudioTrack": true, "isVbr": false, "duration": 3207, "width": 1920, "height": 1080, "fps": 30, "codecs": [{"type": "video", "codec": "AVC"}, {"type": "audio", "codec": "AAC"}], "durationMins": 54},
                                "encodingRequired": false, "precedence": 1, "author": "angel@oasisministries.com", "creationTime": "2025-09-15T17:00:36.032Z", "_id": "68c846340d83970b16f68006",
                                "playback": {"embed_url": "https://player.castr.com/vod/UbhaEq07jrB3xjic"}
                            },
                            {
                                "enabled": true,
                                "id": "nR6PLptRx61BjjrW.mp4",
                                "fileName": "Questions and Answers.mp4",
                                "bytes": 697750656,
                                "mediaInfo": {"hasAudioTrack": true, "isVbr": false, "duration": 1709, "width": 1920, "height": 1080, "fps": 30, "codecs": [{"type": "video", "codec": "AVC"}, {"type": "audio", "codec": "AAC"}], "durationMins": 29},
                                "encodingRequired": false, "precedence": 1, "author": "angel@oasisministries.com", "creationTime": "2025-09-15T16:36:20.843Z", "_id": "68c840847babc00b782f22c6",
                                "playback": {"embed_url": "https://player.castr.com/vod/nR6PLptRx61BjjrW"}
                            },
                            {
                                "enabled": true,
                                "id": "QLDkgnhdIkY1Vhpj.mp4",
                                "fileName": "Giants Will Fall.mp4",
                                "bytes": 944735399,
                                "mediaInfo": {"hasAudioTrack": true, "isVbr": false, "duration": 1709, "width": 1920, "height": 1080, "fps": 30, "codecs": [{"type": "video", "codec": "AVC"}, {"type": "audio", "codec": "AAC"}], "durationMins": 29},
                                "encodingRequired": false, "precedence": 1, "author": "angel@oasisministries.com", "creationTime": "2025-09-15T16:20:53.240Z", "_id": "68c83ce599f4460b5b3e4642",
                                "playback": {"embed_url": "https://player.castr.com/vod/QLDkgnhdIkY1Vhpj"}
                            },
                            {
                                "enabled": true,
                                "id": "GiuRtWqfVU0lyx0d.mp4",
                                "fileName": "Getting Past the Now",
                                "bytes": 1047285583,
                                "mediaInfo": {"hasAudioTrack": true, "isVbr": false, "duration": 1712, "width": 1920, "height": 1080, "fps": 29, "codecs": [{"type": "video", "codec": "AVC"}, {"type": "audio", "codec": "AAC"}], "durationMins": 29},
                                "encodingRequired": false, "precedence": 1, "author": "kaylen@greaterlove.tv", "creationTime": "2025-09-15T15:16:33.772Z", "_id": "68c82dd1d029850ba4c6849d",
                                "playback": {"embed_url": "https://player.castr.com/vod/GiuRtWqfVU0lyx0d"}
                            },
                            {
                                "enabled": true,
                                "id": "4YKOhl3bXu8URcJ1.mp4",
                                "fileName": "Let Faith Take You Where You've Never Been Before",
                                "bytes": 703527375,
                                "mediaInfo": {"hasAudioTrack": true, "isVbr": false, "duration": 1712, "width": 1920, "height": 1080, "fps": 29, "codecs": [{"type": "video", "codec": "AVC"}, {"type": "audio", "codec": "AAC"}], "durationMins": 29},
                                "encodingRequired": false, "precedence": 1, "author": "kaylen@greaterlove.tv", "creationTime": "2025-09-15T15:16:09.952Z", "_id": "68c82db96ee24b0b41613514",
                                "playback": {"embed_url": "https://player.castr.com/vod/4YKOhl3bXu8URcJ1"}
                            }
                        ],
                        "user": "68652a3418bba63c0f32a04d",
                        "creation_time": "2025-09-15T14:06:54.534Z"
                    },
                    {
                        "_id": "68a86fd7ea336e28e2f86ea0",
                        "name": "Better Life Now",
                        "enabled": true,
                        "type": "vod",
                        "data": [
                            {
                                "enabled": true,
                                "id": "s075nAum5LU9dUwo.mp4",
                                "fileName": "The Miracles I Have Seen - Part 3",
                                "bytes": 559596589,
                                "mediaInfo": {"hasAudioTrack": true, "isVbr": false, "duration": 1711, "width": 1920, "height": 1080, "fps": 25, "codecs": [{"type": "video", "codec": "AVC"}, {"type": "audio", "codec": "AAC"}], "durationMins": 29},
                                "encodingRequired": false, "precedence": 1, "author": "kaylen@greaterlove.tv", "creationTime": "2025-08-22T13:26:12.070Z", "_id": "68a86ff4c24ef12911c9392c",
                                "playback": {"embed_url": "https://player.castr.com/vod/s075nAum5LU9dUwo"}
                            },
                            {
                                "enabled": true,
                                "id": "VOmBbwrg5f3PB4ED.mp4",
                                "fileName": "The Miracles I Have Seen - Part 2",
                                "bytes": 546139087,
                                "mediaInfo": {"hasAudioTrack": true, "isVbr": false, "duration": 1711, "width": 1920, "height": 1080, "fps": 25, "codecs": [{"type": "video", "codec": "AVC"}, {"type": "audio", "codec": "AAC"}], "durationMins": 29},
                                "encodingRequired": false, "precedence": 1, "author": "kaylen@greaterlove.tv", "creationTime": "2025-08-22T13:26:03.373Z", "_id": "68a86feb0135a82920330552",
                                "playback": {"embed_url": "https://player.castr.com/vod/VOmBbwrg5f3PB4ED"}
                            },
                            {
                                "enabled": true,
                                "id": "65kdr9Lx6kYZgxmr.mp4",
                                "fileName": "The Miracles I Have Seen - Part 1",
                                "bytes": 536487106,
                                "mediaInfo": {"hasAudioTrack": true, "isVbr": false, "duration": 1711, "width": 1920, "height": 1080, "fps": 25, "codecs": [{"type": "video", "codec": "AVC"}, {"type": "audio", "codec": "AAC"}], "durationMins": 29},
                                "encodingRequired": false, "precedence": 1, "author": "kaylen@greaterlove.tv", "creationTime": "2025-08-22T13:25:55.300Z", "_id": "68a86fe3e0502b288e6ef664",
                                "playback": {"embed_url": "https://player.castr.com/vod/65kdr9Lx6kYZgxmr"}
                            }
                        ],
                        "user": "68652a3418bba63c0f32a04d",
                        "creation_time": "2025-08-22T13:25:43.597Z"
                    },
                    {
                        "_id": "68a867dcea336e28e2f4c503",
                        "name": "The Bride Live",
                        "enabled": true,
                        "type": "vod",
                        "data": [
                            {
                                "enabled": true,
                                "id": "8uNkFKJfWkh6ZZCW.mp4",
                                "fileName": "Ephesians 1:5-6",
                                "bytes": 237558240,
                                "mediaInfo": {"hasAudioTrack": true, "isVbr": false, "duration": 1711, "width": 1280, "height": 720, "fps": 30, "codecs": [{"type": "video", "codec": "AVC"}, {"type": "audio", "codec": "AAC"}], "durationMins": 29},
                                "encodingRequired": false, "precedence": 1, "author": "kaylen@greaterlove.tv", "creationTime": "2025-08-22T13:23:50.671Z", "_id": "68a86f660135a8292032bef9",
                                "playback": {"embed_url": "https://player.castr.com/vod/8uNkFKJfWkh6ZZCW"}
                            },
                            {
                                "enabled": true,
                                "id": "ovsQRC5tZyHZFXWt.mp4",
                                "fileName": "Immanuel - God Is With Us",
                                "bytes": 270731378,
                                "mediaInfo": {"hasAudioTrack": true, "isVbr": false, "duration": 1711, "width": 1280, "height": 720, "fps": 30, "codecs": [{"type": "video", "codec": "AVC"}, {"type": "audio", "codec": "AAC"}], "durationMins": 29},
                                "encodingRequired": false, "precedence": 1, "author": "kaylen@greaterlove.tv", "creationTime": "2025-08-22T12:52:01.167Z", "_id": "68a867f129bd0928cc1801ad",
                                "playback": {"embed_url": "https://player.castr.com/vod/ovsQRC5tZyHZFXWt"}
                            },
                            {
                                "enabled": true,
                                "id": "pC891s9m8BE7zM7E.mp4",
                                "fileName": "Ephesians 4:11-13",
                                "bytes": 477530879,
                                "mediaInfo": {"hasAudioTrack": true, "isVbr": false, "duration": 1514, "width": 1920, "height": 1080, "fps": 30, "codecs": [{"type": "video", "codec": "AVC"}, {"type": "audio", "codec": "AAC"}], "durationMins": 26},
                                "encodingRequired": false, "precedence": 1, "author": "kaylen@greaterlove.tv", "creationTime": "2025-08-22T12:51:51.747Z", "_id": "68a867e79b564e2927a98ea7",
                                "playback": {"embed_url": "https://player.castr.com/vod/pC891s9m8BE7zM7E"}
                            }
                        ],
                        "user": "68652a3418bba63c0f32a04d",
                        "creation_time": "2025-08-22T12:51:40.912Z"
                    },
                    {
                        "_id": "689661e6ca61a2a76d44a85a",
                        "name": "The Shield of Faith",
                        "enabled": true,
                        "type": "vod",
                        "data": [
                            {
                                "enabled": true,
                                "id": "YjAUpUhpDxxnB8qb.mp4",
                                "fileName": "8-21-2025",
                                "bytes": 1354093465,
                                "mediaInfo": {"hasAudioTrack": true, "isVbr": false, "duration": 1712, "width": 1748, "height": 1080, "fps": 29, "codecs": [{"type": "video", "codec": "AVC"}, {"type": "audio", "codec": "AAC"}], "durationMins": 29},
                                "encodingRequired": false, "precedence": 1, "author": "angel@oasisministries.com", "creationTime": "2025-09-05T17:24:17.197Z", "_id": "68bb1cc1e97d7196caa1c58d",
                                "playback": {"embed_url": "https://player.castr.com/vod/YjAUpUhpDxxnB8qb"}
                            },
                            {
                                "enabled": true,
                                "id": "crWJOFPp7BZ2ybR2.mp4",
                                "fileName": "8-28-2025",
                                "bytes": 1216516326,
                                "mediaInfo": {"hasAudioTrack": true, "isVbr": false, "duration": 1712, "width": 1700, "height": 1080, "fps": 29, "codecs": [{"type": "video", "codec": "AVC"}, {"type": "audio", "codec": "AAC"}], "durationMins": 29},
                                "encodingRequired": false, "precedence": 1, "author": "angel@oasisministries.com", "creationTime": "2025-09-05T17:08:50.921Z", "_id": "68bb19227738d496a9c8ae11",
                                "playback": {"embed_url": "https://player.castr.com/vod/crWJOFPp7BZ2ybR2"}
                            },
                            {
                                "enabled": true,
                                "id": "iKK7GhyuSgSApxRU.mp4",
                                "fileName": "9-4-2025",
                                "bytes": 1310738907,
                                "mediaInfo": {"hasAudioTrack": true, "isVbr": false, "duration": 1712, "width": 1920, "height": 1080, "fps": 29, "codecs": [{"type": "video", "codec": "AVC"}, {"type": "audio", "codec": "AAC"}], "durationMins": 29},
                                "encodingRequired": false, "precedence": 1, "author": "angel@oasisministries.com", "creationTime": "2025-09-05T15:38:20.233Z", "_id": "68bb03ec6d615596efb4d7e7",
                                "playback": {"embed_url": "https://player.castr.com/vod/iKK7GhyuSgSApxRU"}
                            },
                            {
                                "enabled": true,
                                "id": "veJIVfz0VIwEUxG2.mp4",
                                "fileName": "8-14-25",
                                "bytes": 1225272671,
                                "mediaInfo": {"hasAudioTrack": true, "isVbr": false, "duration": 1712, "width": 1920, "height": 1080, "fps": 29, "codecs": [{"type": "video", "codec": "AVC"}, {"type": "audio", "codec": "AAC"}], "durationMins": 29},
                                "encodingRequired": false, "precedence": 1, "author": "kaylen@greaterlove.tv", "creationTime": "2025-08-11T14:08:50.940Z", "_id": "6899f972188625a704e8ef4d",
                                "playback": {"embed_url": "https://player.castr.com/vod/veJIVfz0VIwEUxG2"}
                            },
                            {
                                "enabled": true,
                                "id": "HCTujXAQxTDNYzOl.mp4",
                                "fileName": "8-7-2025",
                                "bytes": 1368793532,
                                "mediaInfo": {"hasAudioTrack": true, "isVbr": false, "duration": 1712, "width": 1920, "height": 1080, "fps": 29, "codecs": [{"type": "video", "codec": "AVC"}, {"type": "audio", "codec": "AAC"}], "durationMins": 29},
                                "encodingRequired": false, "precedence": 1, "author": "kaylen@greaterlove.tv", "creationTime": "2025-08-11T14:08:17.671Z", "_id": "6899f951854969a757670247",
                                "playback": {"embed_url": "https://player.castr.com/vod/HCTujXAQxTDNYzOl"}
                            },
                            {
                                "enabled": true,
                                "id": "ml0QFEmwKDNmVhd0.mp4",
                                "fileName": "7-31-25",
                                "bytes": 1295190198,
                                "mediaInfo": {"hasAudioTrack": true, "isVbr": false, "duration": 1712, "width": 1920, "height": 1080, "fps": 29, "codecs": [{"type": "video", "codec": "AVC"}, {"type": "audio", "codec": "AAC"}], "durationMins": 29},
                                "encodingRequired": false, "precedence": 1, "author": "kaylen@greaterlove.tv", "creationTime": "2025-08-08T20:45:57.217Z", "_id": "68966205a6147ea74131c939",
                                "playback": {"embed_url": "https://player.castr.com/vod/ml0QFEmwKDNmVhd0"}
                            }
                        ],
                        "user": "68652a3418bba63c0f32a04d",
                        "creation_time": "2025-08-08T20:45:26.711Z"
                    },
                    {
                        "_id": "68960a42ad39e1a712a36198",
                        "name": "Seeds Kids",
                        "enabled": true,
                        "type": "vod",
                        "data": [
                            {
                                "enabled": true,
                                "id": "OjYeHl6gbCDmuCQb.mp4",
                                "fileName": "Season 2, Episode 2",
                                "bytes": 467680827,
                                "mediaInfo": {"hasAudioTrack": true, "isVbr": false, "duration": 1711, "width": 1280, "height": 720, "fps": 29, "codecs": [{"type": "video", "codec": "AVC"}, {"type": "audio", "codec": "AAC"}], "durationMins": 29},
                                "encodingRequired": false, "precedence": 1, "author": "kaylen@greaterlove.tv", "creationTime": "2025-08-08T14:33:11.220Z", "_id": "68960aa7631853a74cc1332f",
                                "playback": {"embed_url": "https://player.castr.com/vod/OjYeHl6gbCDmuCQb"}
                            },
                            {
                                "enabled": true,
                                "id": "RnFULPwIfDiN8Cq4.mp4",
                                "fileName": "Season 1, Episode 8",
                                "bytes": 555159106,
                                "mediaInfo": {"hasAudioTrack": true, "isVbr": false, "duration": 1710, "width": 1280, "height": 720, "fps": 29, "codecs": [{"type": "video", "codec": "AVC"}, {"type": "audio", "codec": "AAC"}], "durationMins": 29},
                                "encodingRequired": false, "precedence": 1, "author": "kaylen@greaterlove.tv", "creationTime": "2025-08-08T14:32:22.244Z", "_id": "68960a76854969a757c01432",
                                "playback": {"embed_url": "https://player.castr.com/vod/RnFULPwIfDiN8Cq4"}
                            },
                            {
                                "enabled": true,
                                "id": "Eiz54oqZcTKrdCLS.mp4",
                                "fileName": "Season 1, Episode 7",
                                "bytes": 520505339,
                                "mediaInfo": {"hasAudioTrack": true, "isVbr": false, "duration": 1711, "width": 1280, "height": 720, "fps": 29, "codecs": [{"type": "video", "codec": "AVC"}, {"type": "audio", "codec": "AAC"}], "durationMins": 29},
                                "encodingRequired": false, "precedence": 1, "author": "kaylen@greaterlove.tv", "creationTime": "2025-08-08T14:32:02.803Z", "_id": "68960a62ad39e1a712a3651c",
                                "playback": {"embed_url": "https://player.castr.com/vod/Eiz54oqZcTKrdCLS"}
                            }
                        ],
                        "user": "68652a3418bba63c0f32a04d",
                        "creation_time": "2025-08-08T14:31:30.729Z"
                    },
                    {
                        "_id": "6896098d65c7a5a78382378f",
                        "name": "Voice of Hope",
                        "enabled": true,
                        "type": "vod",
                        "data": [
                            {
                                "enabled": true,
                                "id": "b9hVYUMtJqiOIntY.mp4",
                                "fileName": "It's Time for a Name Change",
                                "bytes": 668424395,
                                "mediaInfo": {"hasAudioTrack": true, "isVbr": false, "duration": 1711, "width": 1920, "height": 1080, "fps": 29, "codecs": [{"type": "video", "codec": "AVC"}, {"type": "audio", "codec": "AAC"}], "durationMins": 29},
                                "encodingRequired": false, "precedence": 1, "author": "angel@oasisministries.com", "creationTime": "2025-09-05T18:13:56.875Z", "_id": "68bb28647738d496a9d0ddd9",
                                "playback": {"embed_url": "https://player.castr.com/vod/b9hVYUMtJqiOIntY"}
                            },
                            {
                                "enabled": true,
                                "id": "K175kn3EKZVIHuCD.mp4",
                                "fileName": "The Power of that One",
                                "bytes": 507921409,
                                "mediaInfo": {"hasAudioTrack": true, "isVbr": false, "duration": 1710, "width": 1920, "height": 1080, "fps": 29, "codecs": [{"type": "video", "codec": "AVC"}, {"type": "audio", "codec": "AAC"}], "durationMins": 29},
                                "encodingRequired": false, "precedence": 1, "author": "angel@oasisministries.com", "creationTime": "2025-09-05T18:01:32.797Z", "_id": "68bb257c2d670296d5e02eaa",
                                "playback": {"embed_url": "https://player.castr.com/vod/K175kn3EKZVIHuCD"}
                            },
                            {
                                "enabled": true,
                                "id": "r6OLqWhHyaOeOBOy.mp4",
                                "fileName": "Where's the Fruit?",
                                "bytes": 424890670,
                                "mediaInfo": {"hasAudioTrack": true, "isVbr": false, "duration": 1710, "width": 1920, "height": 1080, "fps": 29, "codecs": [{"type": "video", "codec": "AVC"}, {"type": "audio", "codec": "AAC"}], "durationMins": 29},
                                "encodingRequired": false, "precedence": 1, "author": "angel@oasisministries.com", "creationTime": "2025-09-05T17:46:18.297Z", "_id": "68bb21eab888b7967d012fe1",
                                "playback": {"embed_url": "https://player.castr.com/vod/r6OLqWhHyaOeOBOy"}
                            },
                            {
                                "enabled": true,
                                "id": "geFIxnpcwJyNrm4t.mp4",
                                "fileName": "Mountain Climbing Faith",
                                "bytes": 915733881,
                                "mediaInfo": {"hasAudioTrack": true, "isVbr": false, "duration": 1710, "width": 1920, "height": 1080, "fps": 29, "codecs": [{"type": "video", "codec": "AVC"}, {"type": "audio", "codec": "AAC"}], "durationMins": 29},
                                "encodingRequired": false, "precedence": 1, "author": "kaylen@greaterlove.tv", "creationTime": "2025-08-08T14:31:13.803Z", "_id": "68960a31cc5c58a7996702b7",
                                "playback": {"embed_url": "https://player.castr.com/vod/geFIxnpcwJyNrm4t"}
                            },
                            {
                                "enabled": true,
                                "id": "x8QftEC1wuUisVwr.mp4",
                                "fileName": "Bloom",
                                "bytes": 817122343,
                                "mediaInfo": {"hasAudioTrack": true, "isVbr": false, "duration": 1710, "width": 1920, "height": 1080, "fps": 29, "codecs": [{"type": "video", "codec": "AVC"}, {"type": "audio", "codec": "AAC"}], "durationMins": 29},
                                "encodingRequired": false, "precedence": 1, "author": "kaylen@greaterlove.tv", "creationTime": "2025-08-08T14:30:41.404Z", "_id": "68960a11a072f4a70b031928",
                                "playback": {"embed_url": "https://player.castr.com/vod/x8QftEC1wuUisVwr"}
                            },
                            {
                                "enabled": true,
                                "id": "yBmLsdmPwGl8pZTG.mp4",
                                "fileName": "Standing on God's Promises",
                                "bytes": 480394982,
                                "mediaInfo": {"hasAudioTrack": true, "isVbr": false, "duration": 1710, "width": 1920, "height": 1080, "fps": 29, "codecs": [{"type": "video", "codec": "AVC"}, {"type": "audio", "codec": "AAC"}], "durationMins": 29},
                                "encodingRequired": false, "precedence": 1, "author": "kaylen@greaterlove.tv", "creationTime": "2025-08-08T14:30:04.385Z", "_id": "689609ec3728aba7a40acf94",
                                "playback": {"embed_url": "https://player.castr.com/vod/yBmLsdmPwGl8pZTG"}
                            }
                        ],
                        "user": "68652a3418bba63c0f32a04d",
                        "creation_time": "2025-08-08T14:28:29.525Z"
                    },
                    {
                        "_id": "68951354a956cb4f027ab462",
                        "name": "Chosen Kids",
                        "enabled": true,
                        "type": "vod",
                        "data": [
                            {
                                "enabled": true,
                                "id": "tTtlfOC3FaNXyw1Y.mp4",
                                "fileName": "Outside Park Play",
                                "bytes": 763770785,
                                "mediaInfo": {"hasAudioTrack": true, "isVbr": false, "duration": 1709, "width": 1280, "height": 720, "fps": 29, "codecs": [{"type": "video", "codec": "AVC"}, {"type": "audio", "codec": "AAC"}], "durationMins": 29},
                                "encodingRequired": false, "precedence": 1, "author": "kaylen@greaterlove.tv", "creationTime": "2025-08-07T20:58:26.200Z", "_id": "68951372ad858c4eaa17ac9c",
                                "playback": {"embed_url": "https://player.castr.com/vod/tTtlfOC3FaNXyw1Y"}
                            },
                            {
                                "enabled": true,
                                "id": "uUaluRLXuXuXPUCa.mp4",
                                "fileName": "Learning About Wild Life Animals",
                                "bytes": 613735708,
                                "mediaInfo": {"hasAudioTrack": true, "isVbr": false, "duration": 1703, "width": 1280, "height": 720, "fps": 29, "codecs": [{"type": "video", "codec": "AVC"}, {"type": "audio", "codec": "AAC"}], "durationMins": 29},
                                "encodingRequired": false, "precedence": 1, "author": "kaylen@greaterlove.tv", "creationTime": "2025-08-07T20:58:16.598Z", "_id": "689513680852944e9c636726",
                                "playback": {"embed_url": "https://player.castr.com/vod/uUaluRLXuXuXPUCa"}
                            },
                            {
                                "enabled": true,
                                "id": "okYqxNBG2k6c1jfQ.mp4",
                                "fileName": "Noahs Ark",
                                "bytes": 659805613,
                                "mediaInfo": {"hasAudioTrack": true, "isVbr": false, "duration": 1707, "width": 1280, "height": 720, "fps": 29, "codecs": [{"type": "video", "codec": "AVC"}, {"type": "audio", "codec": "AAC"}], "durationMins": 29},
                                "encodingRequired": false, "precedence": 1, "author": "kaylen@greaterlove.tv", "creationTime": "2025-08-07T20:58:08.465Z", "_id": "68951360ad858c4eaa17aae5",
                                "playback": {"embed_url": "https://player.castr.com/vod/okYqxNBG2k6c1jfQ"}
                            }
                        ],
                        "user": "68652a3418bba63c0f32a04d",
                        "creation_time": "2025-08-07T20:57:56.497Z"
                    },
                    {
                        "_id": "6894fd9edba7224ea3a26ddf",
                        "name": "Gospel for Everyone",
                        "enabled": true,
                        "type": "vod",
                        "data": [
                            {
                                "enabled": true,
                                "id": "KBw2MaXgLguXaAWN.mp4",
                                "fileName": "Roman Road",
                                "bytes": 537766987,
                                "mediaInfo": {"hasAudioTrack": true, "isVbr": false, "duration": 1712, "width": 1920, "height": 1080, "fps": 29, "codecs": [{"type": "video", "codec": "AVC"}, {"type": "audio", "codec": "AAC"}], "durationMins": 29},
                                "encodingRequired": false, "precedence": 1, "author": "angel@oasisministries.com", "creationTime": "2025-09-08T17:21:22.069Z", "_id": "68bf10925a56c49673328d8b",
                                "playback": {"embed_url": "https://player.castr.com/vod/KBw2MaXgLguXaAWN"}
                            },
                            {
                                "enabled": true,
                                "id": "sw1z4aVw9Bbc9jcS.mp4",
                                "fileName": "Four Spiritual Laws",
                                "bytes": 577794112,
                                "mediaInfo": {"hasAudioTrack": true, "isVbr": false, "duration": 1712, "width": 1920, "height": 1080, "fps": 29, "codecs": [{"type": "video", "codec": "AVC"}, {"type": "audio", "codec": "AAC"}], "durationMins": 29},
                                "encodingRequired": false, "precedence": 1, "author": "angel@oasisministries.com", "creationTime": "2025-09-05T19:11:47.273Z", "_id": "68bb35f36d615596efcf4b85",
                                "playback": {"embed_url": "https://player.castr.com/vod/sw1z4aVw9Bbc9jcS"}
                            },
                            {
                                "enabled": true,
                                "id": "WQkxf4KPhugVELI5.mp4",
                                "fileName": "One Message, Many Cultures - Cross-Cultural Evangelism",
                                "bytes": 465997847,
                                "mediaInfo": {"hasAudioTrack": true, "isVbr": false, "duration": 1712, "width": 1920, "height": 1080, "fps": 29, "codecs": [{"type": "video", "codec": "AVC"}, {"type": "audio", "codec": "AAC"}], "durationMins": 29},
                                "encodingRequired": false, "precedence": 1, "author": "kaylen@greaterlove.tv", "creationTime": "2025-08-07T20:56:35.112Z", "_id": "68951303ea60154f26bc1a0d",
                                "playback": {"embed_url": "https://player.castr.com/vod/WQkxf4KPhugVELI5"}
                            },
                            {
                                "enabled": true,
                                "id": "EgDE9CUStMax923r.mp4",
                                "fileName": "Faith Over Fear - Overcoming the Anxiety of Evangelism",
                                "bytes": 325099318,
                                "mediaInfo": {"hasAudioTrack": true, "isVbr": false, "duration": 1712, "width": 1920, "height": 1078, "fps": 29, "codecs": [{"type": "video", "codec": "AVC"}, {"type": "audio", "codec": "AAC"}], "durationMins": 29},
                                "encodingRequired": false, "precedence": 1, "author": "kaylen@greaterlove.tv", "creationTime": "2025-08-07T19:25:29.545Z", "_id": "6894fda99535064ed63d8230",
                                "playback": {"embed_url": "https://player.castr.com/vod/EgDE9CUStMax923r"}
                            }
                        ],
                        "user": "68652a3418bba63c0f32a04d",
                        "creation_time": "2025-08-07T19:25:18.237Z"
                    },
                    {
                        "_id": "6894fb908bbc104f1f1d32e3",
                        "name": "Radiant Living Worship Center",
                        "enabled": true,
                        "type": "vod",
                        "data": [
                            {
                                "enabled": true,
                                "id": "dJY7009xXcyO64Dm.mp4",
                                "fileName": "Modern Day Evangelism",
                                "bytes": 494066806,
                                "mediaInfo": {"hasAudioTrack": true, "isVbr": false, "duration": 1717, "width": 1920, "height": 1080, "fps": 29, "codecs": [{"type": "video", "codec": "AVC"}, {"type": "audio", "codec": "AAC"}], "durationMins": 29},
                                "encodingRequired": false, "precedence": 1, "author": "kaylen@greaterlove.tv", "creationTime": "2025-08-07T19:16:46.665Z", "_id": "6894fb9eb849824eb55453d3",
                                "playback": {"embed_url": "https://player.castr.com/vod/dJY7009xXcyO64Dm"}
                            }
                        ],
                        "user": "68652a3418bba63c0f32a04d",
                        "creation_time": "2025-08-07T19:16:32.056Z"
                    }
                ]
            };

            // Use your exact API data structure
            shows = realApiData.docs.map(show => ({
                ...show,
                episodeCount: show.data ? show.data.filter(ep => ep.enabled).length : 0
            }));

            console.log('‚úÖ Using your LIVE API data');
            setApiStatus('success', `‚úÖ Loaded LIVE API data (${shows.length} shows)`);

            // Use YOUR exact live stream data from iOS app
            liveStreams = [
                {
                    "_id": "static_channel_1",
                    "name": "Greater Love TV Channel 1",
                    "enabled": true,
                    "creation_time": "2025-01-01T00:00:00.000Z",
                    "embed_url": "https://swf.tulix.tv/iframe/greaterlove/",
                    "hls_url": "https://rpn.bozztv.com/dvrfl03/itv04060/index.m3u8",
                    "thumbnail_url": "../images/GL_live_1.png",
                    "image": "../images/GL_live_1.png",
                    "broadcasting_status": "online"
                },
                {
                    "_id": "static_channel_2",
                    "name": "Greater Love TV Channel 2",
                    "enabled": true,
                    "creation_time": "2025-01-01T00:00:00.000Z",
                    "embed_url": "https://swf.tulix.tv/iframe/greaterlove2/",
                    "hls_url": "https://rpn.bozztv.com/dvrfl04/itv04019/index.m3u8",
                    "thumbnail_url": "../images/GL_live_2.png",
                    "image": "../images/GL_live_2.png",
                    "broadcasting_status": "online"
                }
            ];

            console.log('üîÑ Data loaded successfully');
            console.log('üì∫ Shows:', shows.length);
            console.log('üî¥ Live Streams:', liveStreams.length);

            renderContent();
            updateCounts();
        }

        function debugAPIData() {
            console.log('üêõ === DEBUG API DATA ===');
            console.log('üì∫ Shows:', shows);
            console.log('üî¥ Live Streams:', liveStreams);

            shows.forEach((show, index) => {
                console.log(`Show ${index + 1}: ${show.name} - ${show.episodeCount} episodes`);
                if (show.data && show.data.length > 0) {
                    show.data.forEach((episode, epIndex) => {
                        console.log(`  Episode ${epIndex + 1}: ${episode.fileName} - ${episode.playback?.embed_url}`);
                    });
                }
            });

            alert(`‚úÖ DEBUG INFO:\nüì∫ Shows: ${shows.length}\nüî¥ Live Streams: ${liveStreams.length}\n\nCheck console for detailed episode data.`);
        }

        function setApiStatus(type, message) {
            const statusEl = document.getElementById('apiStatus');
            statusEl.className = `api-status ${type}`;
            statusEl.textContent = message;
        }

        function updateCounts() {
            document.getElementById('showCount').textContent = `Shows: ${shows.length}`;
            document.getElementById('streamCount').textContent = `Streams: ${liveStreams.length}`;
        }

        // Render content based on current data
        function renderContent() {
            renderLiveStreams();
            renderPremiumShows();
            renderShows();
            updateFocusableElements();
        }

        function renderLiveStreams() {
            const container = document.getElementById('liveStreamsCarousel');
            container.innerHTML = '';

            liveStreams.forEach((stream, index) => {
                const card = document.createElement('div');
                card.className = 'card live-card';
                card.dataset.type = 'livestream';
                card.dataset.index = index;

                card.innerHTML = `
                    <img src="${stream.image || '../images/GL_live_1.png'}" alt="${stream.name}" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjgwIiBoZWlnaHQ9IjE2MCIgdmlld0JveD0iMCAwIDI4MCAxNjAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjI4MCIgaGVpZ2h0PSIxNjAiIGZpbGw9IiNEQzE0M0MiLz48dGV4dCB4PSIxNDAiIHk9IjgwIiBmaWxsPSJ3aGl0ZSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1zaXplPSIxOCI+TElWRTwvdGV4dD48L3N2Zz4='">
                    <div class="live-badge">üî¥ LIVE</div>
                    <div class="card-content">
                        <div class="card-title">${stream.name}</div>
                        <div class="card-description">Live Christian Programming</div>
                    </div>
                `;

                card.addEventListener('click', () => {
                    playLiveStream(stream);
                });

                container.appendChild(card);
            });
        }

        function renderPremiumShows() {
            const container = document.getElementById('premiumShowsCarousel');
            container.innerHTML = '';

            // Get shows with most episodes for premium
            const premiumShows = shows
                .filter(show => show.episodeCount > 0)
                .sort((a, b) => b.episodeCount - a.episodeCount)
                .slice(0, 6);

            premiumShows.forEach((show, index) => {
                const card = document.createElement('div');
                card.className = 'card';
                card.dataset.type = 'premium-show';
                card.dataset.showName = show.name;

                card.innerHTML = `
                    <img src="../images/app_logo.png" alt="${show.name}" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjgwIiBoZWlnaHQ9IjE2MCIgdmlld0JveD0iMCAwIDI4MCAxNjAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjI4MCIgaGVpZ2h0PSIxNjAiIGZpbGw9IiMxQTIzMzIiLz48dGV4dCB4PSIxNDAiIHk9IjcwIiBmaWxsPSJ3aGl0ZSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1zaXplPSIxMiI+UHJlbWl1bTwvdGV4dD48dGV4dCB4PSIxNDAiIHk9IjkwIiBmaWxsPSJ3aGl0ZSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1zaXplPSIxMiI+U2hvdzwvdGV4dD48L3N2Zz4='">
                    <div class="card-content">
                        <div class="card-title">${show.name}</div>
                        <div class="card-description">${show.episodeCount} Episodes</div>
                        <div style="position: absolute; top: 8px; right: 8px; background: #FFD700; color: #000; padding: 4px 8px; border-radius: 4px; font-size: 10px; font-weight: bold;">‚≠ê PREMIUM</div>
                    </div>
                `;

                card.addEventListener('click', () => {
                    showEpisodeList(show);
                });

                container.appendChild(card);
            });
        }

        function renderShows() {
            const container = document.getElementById('showsCarousel');
            container.innerHTML = '';

            shows.slice(0, 10).forEach((show, index) => {
                const card = document.createElement('div');
                card.className = 'card';
                card.dataset.type = 'show';
                card.dataset.index = index;

                card.innerHTML = `
                    <img src="../images/app_logo.png" alt="${show.name}" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjgwIiBoZWlnaHQ9IjE2MCIgdmlld0JveD0iMCAwIDI4MCAxNjAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjI4MCIgaGVpZ2h0PSIxNjAiIGZpbGw9IiMxQTIzMzIiLz48dGV4dCB4PSIxNDAiIHk9IjgwIiBmaWxsPSJ3aGl0ZSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1zaXplPSIxNCI+U2hvdzwvdGV4dD48L3N2Zz4='">
                    <div class="card-content">
                        <div class="card-title">${show.name}</div>
                        <div class="card-description">${show.episodeCount} episodes</div>
                    </div>
                `;

                card.addEventListener('click', () => {
                    console.log('üì∫ Show card clicked:', show.name, show);
                    showEpisodeList(show);
                });

                container.appendChild(card);
            });
        }

        function showEpisodeList(show) {
            console.log('üìã Showing Episodes for:', show.name);

            if (!show.data || show.data.length === 0) {
                alert(`No episodes available for "${show.name}"\n\nThis show may not have any episodes uploaded yet.`);
                return;
            }

            // Create episode modal
            const episodeModal = document.createElement('div');
            episodeModal.className = 'video-player-overlay active';
            episodeModal.id = 'episodeModal';

            episodeModal.innerHTML = `
                <div class="video-player-header">
                    <button class="video-back-button" onclick="closeEpisodeList()">‚Üê Back</button>
                    <div>
                        <h2 class="video-title">${show.name}</h2>
                    </div>
                </div>
                <div style="flex: 1; padding: 40px; overflow-y: auto;">
                    <p style="color: #ccc; margin-bottom: 30px; text-align: center; font-size: 18px;">${show.episodeCount} Episodes Available</p>
                    <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(350px, 1fr)); gap: 20px;">
                        ${show.data.map((episode, index) => `
                            <div class="episode-card" onclick="playEpisodeFromList('${episode.id}', '${show.name}')" style="background: #2A2A2A; padding: 20px; border-radius: 12px; cursor: pointer; transition: all 0.3s ease; border: 2px solid transparent;">
                                <h4 style="color: white; margin-bottom: 10px; font-size: 16px;">${episode.fileName.replace('.mp4', '')}</h4>
                                <p style="color: #ccc; font-size: 14px; margin-bottom: 10px;">Duration: ${episode.mediaInfo?.durationMins || 'Unknown'} minutes</p>
                                <p style="color: #aaa; font-size: 12px;">Uploaded: ${new Date(episode.creationTime).toLocaleDateString()}</p>
                                <div style="margin-top: 15px; display: flex; justify-content: center;">
                                    <button style="background: #DC143C; color: white; border: none; padding: 8px 16px; border-radius: 6px; font-size: 12px; cursor: pointer;">‚ñ∂Ô∏è Play Episode</button>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;

            document.body.appendChild(episodeModal);

            // Add hover effects
            setTimeout(() => {
                document.querySelectorAll('.episode-card').forEach(card => {
                    card.addEventListener('mouseenter', () => {
                        card.style.borderColor = '#DC143C';
                        card.style.transform = 'translateY(-5px)';
                        card.style.boxShadow = '0 10px 25px rgba(220, 20, 60, 0.3)';
                    });
                    card.addEventListener('mouseleave', () => {
                        card.style.borderColor = 'transparent';
                        card.style.transform = 'translateY(0)';
                        card.style.boxShadow = 'none';
                    });
                });
            }, 100);
        }

        function playEpisodeFromList(episodeId, showName) {
            const show = shows.find(s => s.name === showName);
            const episode = show.data.find(ep => ep.id === episodeId);

            if (episode) {
                closeEpisodeList();
                playEpisode(episode, showName);
            }
        }

        function closeEpisodeList() {
            const episodeModal = document.getElementById('episodeModal');
            if (episodeModal) {
                episodeModal.remove();
            }
        }

        function playLiveStream(streamData) {
            console.log('üî¥ Playing Live Stream:', streamData.name);

            document.getElementById('videoPlayerOverlay').classList.add('active');
            document.getElementById('videoTitle').textContent = streamData.name;
            document.getElementById('liveIndicator').style.display = 'flex';
            document.getElementById('videoLoading').style.display = 'flex';

            const videoPlayer = document.getElementById('videoPlayer');
            videoPlayer.innerHTML = '';

            const embedUrl = streamData.embed_url;

            if (embedUrl && embedUrl.includes('tulix.tv')) {
                console.log('üîß Using Tulix iframe:', embedUrl);

                const iframe = document.createElement('iframe');
                iframe.src = embedUrl;
                iframe.style.width = '100%';
                iframe.style.height = '100%';
                iframe.style.border = 'none';
                iframe.allowFullscreen = true;
                iframe.allow = 'autoplay; encrypted-media; fullscreen; picture-in-picture';

                setTimeout(() => {
                    document.getElementById('videoLoading').style.display = 'none';
                }, 4000);

                videoPlayer.appendChild(iframe);
                currentVideo = iframe;
            }
        }

        function playEpisode(episodeData, showName) {
            console.log('üì∫ Playing Episode:', episodeData.fileName);

            document.getElementById('videoPlayerOverlay').classList.add('active');
            document.getElementById('videoTitle').textContent = episodeData.fileName.replace('.mp4', '');
            document.getElementById('liveIndicator').style.display = 'none';
            document.getElementById('videoLoading').style.display = 'flex';

            const videoPlayer = document.getElementById('videoPlayer');
            videoPlayer.innerHTML = '';

            const embedUrl = episodeData.playback?.embed_url;

            if (embedUrl) {
                console.log('üé¨ Episode URL:', embedUrl);

                // Show episode info since Castr has web restrictions
                setTimeout(() => {
                    document.getElementById('videoLoading').style.display = 'none';
                    videoPlayer.innerHTML = `
                        <div style="display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100%; color: white; text-align: center; padding: 40px; background: linear-gradient(135deg, #1A2332 0%, #0F1419 100%);">
                            <div style="background: rgba(220, 20, 60, 0.1); border: 2px solid #DC143C; border-radius: 12px; padding: 30px; max-width: 600px;">
                                <h3 style="color: #DC143C; margin-bottom: 20px; font-size: 24px;">üì∫ ${episodeData.fileName.replace('.mp4', '')}</h3>
                                <p style="margin-bottom: 15px; color: #ccc; font-size: 18px;">Show: <strong>${showName}</strong></p>
                                <p style="margin-bottom: 15px; color: #ccc;">Duration: <strong>${episodeData.mediaInfo?.durationMins || 'Unknown'} minutes</strong></p>
                                <p style="margin-bottom: 20px; color: #aaa; font-size: 14px;">Created: ${new Date(episodeData.creationTime).toLocaleDateString()}</p>

                                <div style="background: rgba(0,0,0,0.3); padding: 20px; border-radius: 8px; margin: 20px 0;">
                                    <p style="margin-bottom: 15px; color: #DC143C; font-weight: bold;">‚úÖ Episode Ready for Roku App</p>
                                    <p style="margin-bottom: 10px; color: #10B981; font-size: 14px;">‚úì Episode exists in your Castr API</p>
                                    <p style="margin-bottom: 10px; color: #10B981; font-size: 14px;">‚úì Embed URL is available</p>
                                    <p style="margin-bottom: 15px; color: #aaa; font-size: 12px;">Web browsers have CORS restrictions for Castr player. This episode will play perfectly in the actual Roku TV app using authenticated Castr streaming.</p>
                                    <div style="background: rgba(16, 185, 129, 0.1); border: 1px solid #10B981; border-radius: 6px; padding: 10px; margin: 10px 0;">
                                        <p style="color: #10B981; font-size: 12px; margin: 0;"><strong>‚úì Production Ready:</strong> This episode is configured correctly for Roku deployment</p>
                                    </div>
                                    <p style="color: #888; font-size: 11px; word-break: break-all; margin-top: 10px;">Embed URL: ${embedUrl}</p>
                                </div>

                                <button onclick="testEpisodeInNewWindow('${embedUrl}')" style="background: #DC143C; color: white; border: none; padding: 12px 24px; border-radius: 6px; font-size: 14px; cursor: pointer; margin-right: 10px;">üß™ Test in New Window</button>
                                <button onclick="closeVideoPlayer()" style="background: #666; color: white; border: none; padding: 12px 24px; border-radius: 6px; font-size: 14px; cursor: pointer;">‚Üê Back to Episodes</button>
                            </div>
                        </div>
                    `;
                }, 1000);
            }
        }

        function testEpisodeInNewWindow(embedUrl) {
            if (embedUrl) {
                console.log('üß™ Testing episode URL in new window:', embedUrl);
                window.open(embedUrl, '_blank', 'width=800,height=600');
            } else {
                alert('No embed URL available for testing');
            }
        }

        function closeVideoPlayer() {
            document.getElementById('videoPlayerOverlay').classList.remove('active');

            if (currentVideo) {
                try {
                    if (currentVideo.parentNode) {
                        currentVideo.parentNode.removeChild(currentVideo);
                    }
                } catch (error) {
                    console.log('Error stopping video:', error);
                }
                currentVideo = null;
            }

            document.getElementById('videoPlayer').innerHTML = '';
            document.getElementById('videoLoading').style.display = 'flex';
            document.getElementById('liveIndicator').style.display = 'none';
        }

        // Navigation
        function updateFocusableElements() {
            focusableElements = Array.from(document.querySelectorAll('.card'));
            updateFocus();
        }

        function updateFocus() {
            focusableElements.forEach((el, index) => {
                el.classList.toggle('focused', index === currentFocus);
            });
        }

        function moveFocus(direction) {
            if (focusableElements.length === 0) return;

            if (direction === 'up' || direction === 'down') {
                const step = direction === 'up' ? -3 : 3;
                currentFocus = Math.max(0, Math.min(focusableElements.length - 1, currentFocus + step));
            } else if (direction === 'left' || direction === 'right') {
                const step = direction === 'left' ? -1 : 1;
                currentFocus = Math.max(0, Math.min(focusableElements.length - 1, currentFocus + step));
            }

            updateFocus();

            if (focusableElements[currentFocus]) {
                focusableElements[currentFocus].scrollIntoView({
                    behavior: 'smooth',
                    block: 'nearest',
                    inline: 'center'
                });
            }
        }

        function selectFocusedItem() {
            const focused = focusableElements[currentFocus];
            if (!focused) return;

            const type = focused.dataset.type;
            const index = focused.dataset.index;

            if (type === 'livestream') {
                playLiveStream(liveStreams[index]);
            } else if (type === 'show' || type === 'premium-show') {
                const show = type === 'show' ? shows[index] : shows.find(s => s.name === focused.dataset.showName);
                showEpisodeList(show);
            }
        }

        function handleRemoteKey(key) {
            console.log(`üéÆ Remote Key: ${key}`);

            switch(key) {
                case 'ArrowUp':
                    moveFocus('up');
                    break;
                case 'ArrowDown':
                    moveFocus('down');
                    break;
                case 'ArrowLeft':
                    moveFocus('left');
                    break;
                case 'ArrowRight':
                    moveFocus('right');
                    break;
                case 'Enter':
                case ' ':
                    selectFocusedItem();
                    break;
                case 'Escape':
                    closeVideoPlayer();
                    break;
                case 'Home':
                    closeVideoPlayer();
                    break;
            }
        }

        function setupKeyboardControls() {
            document.addEventListener('keydown', (e) => {
                e.preventDefault();
                handleRemoteKey(e.key);
            });
        }

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>