<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Greater Love TV - Roku App Simulator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #0F1419;
            color: white;
            overflow: hidden;
            height: 100vh;
        }

        .app-container {
            display: flex;
            width: 100vw;
            height: 100vh;
        }

        /* Main App Screen */
        .app-screen {
            flex: 1;
            background: linear-gradient(135deg, #0F1419 0%, #1e3c72 100%);
            position: relative;
            overflow: hidden;
        }

        /* Background Image */
        .background-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #0F1419 0%, #1e3c72 100%);
            z-index: 0;
        }

        /* Header */
        .header {
            position: relative;
            z-index: 10;
            background: rgba(0,0,0,0.8);
            height: 80px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 60px;
            backdrop-filter: blur(10px);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo img {
            height: 50px;
            width: auto;
        }

        .logo-text {
            font-size: 24px;
            font-weight: bold;
            color: #DC143C;
        }

        .nav-menu {
            display: flex;
            gap: 20px;
        }

        .nav-item {
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 16px;
            font-weight: 500;
        }

        .nav-item.active {
            background: #DC143C;
        }

        .nav-item:hover {
            background: #DC143C;
        }

        /* Content Sections */
        .content-container {
            position: relative;
            z-index: 5;
            padding: 40px 60px;
            height: calc(100vh - 80px);
            overflow-y: auto;
        }

        .section {
            margin-bottom: 50px;
        }

        .section-title {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 20px;
            color: white;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-title::before {
            content: '';
            width: 4px;
            height: 30px;
            background: #DC143C;
            border-radius: 2px;
        }

        /* Carousel */
        .carousel {
            display: flex;
            gap: 20px;
            overflow-x: auto;
            padding-bottom: 10px;
            scrollbar-width: thin;
            scrollbar-color: #DC143C transparent;
        }

        .carousel::-webkit-scrollbar {
            height: 6px;
        }

        .carousel::-webkit-scrollbar-track {
            background: rgba(255,255,255,0.1);
            border-radius: 3px;
        }

        .carousel::-webkit-scrollbar-thumb {
            background: #DC143C;
            border-radius: 3px;
        }

        /* Cards */
        .card {
            min-width: 280px;
            background: rgba(26, 35, 50, 0.9);
            border-radius: 12px;
            overflow: hidden;
            transition: all 0.3s ease;
            cursor: pointer;
            border: 2px solid transparent;
            backdrop-filter: blur(10px);
        }

        .card:hover,
        .card.focused {
            transform: scale(1.05);
            border-color: #DC143C;
            box-shadow: 0 10px 30px rgba(220, 20, 60, 0.4);
        }

        .card img {
            width: 100%;
            height: 160px;
            object-fit: cover;
        }

        .card-content {
            padding: 15px;
        }

        .card-title {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 8px;
            color: white;
            line-height: 1.3;
        }

        .card-description {
            font-size: 14px;
            color: #ccc;
            line-height: 1.4;
        }

        /* Live Stream Cards */
        .live-card {
            position: relative;
        }

        .live-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #DC143C;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
        }

        /* Episode List Screen */
        .episode-screen {
            display: none;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.95);
            z-index: 100;
        }

        .episode-screen.active {
            display: block;
        }

        .episode-header {
            background: rgba(0,0,0,0.9);
            padding: 20px 60px;
            border-bottom: 2px solid #DC143C;
        }

        .back-button {
            background: #DC143C;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            margin-bottom: 15px;
        }

        .show-info h2 {
            font-size: 28px;
            margin-bottom: 10px;
        }

        .episode-count {
            color: #DC143C;
            font-size: 16px;
        }

        .episodes-list {
            padding: 40px 60px;
            max-height: calc(100vh - 200px);
            overflow-y: auto;
        }

        .episode-item {
            display: flex;
            align-items: center;
            background: rgba(26, 35, 50, 0.8);
            margin-bottom: 15px;
            border-radius: 8px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .episode-item:hover,
        .episode-item.focused {
            border-color: #DC143C;
            transform: translateX(10px);
        }

        .episode-thumbnail {
            width: 120px;
            height: 80px;
            background: #1A2332;
            border-radius: 6px;
            margin-right: 20px;
            object-fit: cover;
        }

        .episode-details h3 {
            font-size: 16px;
            margin-bottom: 5px;
        }

        .episode-meta {
            color: #ccc;
            font-size: 14px;
        }

        /* About Screen */
        .about-screen {
            display: none;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.95);
            z-index: 100;
            overflow-y: auto;
        }

        .about-screen.active {
            display: block;
        }

        .about-content {
            padding: 40px 60px;
        }

        .about-hero {
            width: 100%;
            height: 300px;
            background-image: url('../images/about_us_top.png');
            background-size: cover;
            background-position: center;
            border-radius: 12px;
            margin-bottom: 40px;
        }

        .mission-section {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 40px;
            margin-bottom: 40px;
        }

        .mission-text h3 {
            font-size: 24px;
            color: #DC143C;
            margin-bottom: 20px;
        }

        .mission-text p {
            line-height: 1.6;
            margin-bottom: 20px;
            color: #ccc;
        }

        .qr-codes {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
        }

        .qr-item {
            text-align: center;
            background: rgba(26, 35, 50, 0.8);
            padding: 20px;
            border-radius: 8px;
        }

        .qr-item img {
            width: 100px;
            height: 100px;
            margin-bottom: 10px;
        }

        /* Loading */
        .loading {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 1000;
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 3px solid #333;
            border-top: 3px solid #DC143C;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Remote Control */
        .remote-control {
            width: 250px;
            background: #2A2A2A;
            padding: 20px;
            display: flex;
            flex-direction: column;
            border-left: 2px solid #444;
        }

        .remote-title {
            color: #DC143C;
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 20px;
            text-align: center;
        }

        .d-pad {
            position: relative;
            width: 120px;
            height: 120px;
            margin: 0 auto 20px;
        }

        .remote-btn {
            position: absolute;
            background: #444;
            border: 2px solid #666;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 14px;
            font-weight: bold;
        }

        .remote-btn:hover {
            background: #666;
        }

        .remote-btn.up { top: 0; left: 40px; width: 40px; height: 30px; border-radius: 15px 15px 5px 5px; }
        .remote-btn.down { bottom: 0; left: 40px; width: 40px; height: 30px; border-radius: 5px 5px 15px 15px; }
        .remote-btn.left { left: 0; top: 40px; width: 30px; height: 40px; border-radius: 15px 5px 5px 15px; }
        .remote-btn.right { right: 0; top: 40px; width: 30px; height: 40px; border-radius: 5px 15px 15px 5px; }
        .remote-btn.ok { top: 40px; left: 40px; width: 40px; height: 40px; border-radius: 50%; background: #DC143C; border-color: #DC143C; }

        .control-buttons {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .control-btn {
            background: #444;
            border: 1px solid #666;
            color: white;
            padding: 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.2s;
        }

        .control-btn:hover { background: #666; }
        .control-btn.home { background: #DC143C; border-color: #DC143C; }
        .control-btn.back { background: #DC2626; }

        /* Status Display */
        .status-display {
            margin-top: 20px;
            padding: 15px;
            background: rgba(0,0,0,0.8);
            border-radius: 6px;
            font-size: 12px;
        }

        .status-display h4 {
            color: #DC143C;
            margin-bottom: 10px;
        }

        .api-status {
            margin: 5px 0;
        }

        .api-status.success { color: #10B981; }
        .api-status.error { color: #EF4444; }
        .api-status.pending { color: #F59E0B; }

        /* QR Code Modal */
        .qr-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.95);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            backdrop-filter: blur(5px);
        }

        .qr-modal.active {
            display: flex;
            animation: modalFadeIn 0.3s ease-out;
        }

        @keyframes modalFadeIn {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }

        .qr-modal-content {
            background: linear-gradient(135deg, #0F1419 0%, #1A2332 100%);
            padding: 0;
            border-radius: 20px;
            max-width: 900px;
            width: 95%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.8);
            border: 2px solid #DC143C;
        }

        .qr-modal-header {
            background: linear-gradient(135deg, #DC143C 0%, #B22222 100%);
            padding: 30px 40px;
            border-radius: 18px 18px 0 0;
            position: relative;
        }

        .qr-modal-header h2 {
            color: white;
            font-size: 28px;
            margin: 0;
            text-align: center;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        .back-button {
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 2px solid rgba(255, 255, 255, 0.3);
            padding: 10px 15px;
            border-radius: 8px;
            font-size: 14px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .back-button:hover {
            background: rgba(255, 255, 255, 0.3);
            border-color: rgba(255, 255, 255, 0.5);
            transform: translateY(-50%) scale(1.05);
        }

        .qr-modal-body {
            padding: 40px;
        }

        .qr-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 30px;
            margin-bottom: 30px;
        }

        .qr-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .qr-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(220, 20, 60, 0.3);
            border-color: #DC143C;
        }

        .qr-card img {
            width: 180px;
            height: 180px;
            margin-bottom: 15px;
            border-radius: 8px;
        }

        .qr-card h3 {
            color: #333;
            font-size: 18px;
            font-weight: bold;
            margin: 0;
        }

        .qr-card p {
            color: #666;
            font-size: 14px;
            margin: 8px 0 0 0;
        }

        .modal-footer {
            text-align: center;
            padding: 0 40px 30px;
        }

        .close-modal {
            background: linear-gradient(135deg, #DC143C 0%, #B22222 100%);
            color: white;
            border: none;
            padding: 15px 35px;
            border-radius: 10px;
            font-size: 16px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(220, 20, 60, 0.4);
        }

        .close-modal:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(220, 20, 60, 0.6);
        }

        /* Video Player */
        .video-player-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: #000;
            display: none;
            z-index: 3000;
            flex-direction: column;
        }

        .video-player-overlay.active {
            display: flex;
        }

        .video-player-header {
            background: rgba(0, 0, 0, 0.8);
            padding: 20px;
            display: flex;
            align-items: center;
            gap: 20px;
            position: relative;
            z-index: 3001;
        }

        .video-back-button {
            background: #DC143C;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            font-size: 14px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .video-back-button:hover {
            background: #B22222;
            transform: scale(1.05);
        }

        .video-title {
            color: white;
            font-size: 24px;
            font-weight: bold;
            margin: 0;
        }

        .video-subtitle {
            color: #ccc;
            font-size: 16px;
            margin: 5px 0 0 0;
        }

        .video-container {
            flex: 1;
            position: relative;
            background: #000;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .video-player {
            width: 100%;
            height: 100%;
            background: #000;
        }

        .video-player video {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .video-player iframe {
            width: 100%;
            height: 100%;
            border: none;
        }

        .video-loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-size: 18px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .video-loading .spinner {
            width: 40px;
            height: 40px;
            border: 3px solid #333;
            border-top: 3px solid #DC143C;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        .video-error {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            text-align: center;
            background: rgba(220, 20, 60, 0.1);
            padding: 30px;
            border-radius: 12px;
            border: 2px solid #DC143C;
        }

        .video-error h3 {
            color: #DC143C;
            margin-bottom: 15px;
        }

        .video-error p {
            margin-bottom: 20px;
            color: #ccc;
        }

        .video-controls {
            background: rgba(0, 0, 0, 0.8);
            padding: 15px 20px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .play-pause-btn {
            background: #DC143C;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
        }

        .play-pause-btn:hover {
            background: #B22222;
        }

        .volume-control {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .volume-slider {
            width: 100px;
            height: 5px;
            background: #333;
            border-radius: 5px;
            outline: none;
            cursor: pointer;
        }

        .volume-slider::-webkit-slider-thumb {
            appearance: none;
            width: 15px;
            height: 15px;
            background: #DC143C;
            border-radius: 50%;
            cursor: pointer;
        }

        .live-indicator {
            background: #DC143C;
            color: white;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .live-dot {
            width: 8px;
            height: 8px;
            background: white;
            border-radius: 50%;
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.3; }
            100% { opacity: 1; }
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .qr-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .qr-modal-content {
                width: 98%;
                margin: 10px;
            }

            .qr-modal-header {
                padding: 20px;
            }

            .qr-modal-header h2 {
                font-size: 22px;
            }

            .qr-modal-body {
                padding: 20px;
            }

            .qr-card {
                padding: 20px;
            }

            .qr-card img {
                width: 150px;
                height: 150px;
            }

            .video-player-header {
                padding: 15px;
            }

            .video-title {
                font-size: 18px;
            }

            .video-controls {
                padding: 10px 15px;
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Main App Screen -->
        <div class="app-screen">
            <!-- Background -->
            <div class="background-overlay"></div>

            <!-- Header -->
            <div class="header">
                <div class="logo">
                    <img src="../images/app_logo.png" alt="Greater Love Network" onerror="this.style.display='none'">
                    <div class="logo-text">GREATER LOVE NETWORK</div>
                </div>
                <div class="nav-menu">
                    <div class="nav-item active" onclick="showMainScreen()">HOME</div>
                    <div class="nav-item" onclick="showAboutScreen()">ABOUT US</div>
                    <div class="nav-item" onclick="focusAllShows()">ALL SHOWS</div>
                    <div class="nav-item" onclick="showInfoDialog()">INFO</div>
                </div>
            </div>

            <!-- Main Content -->
            <div class="content-container" id="mainContent">
                <!-- Hero Section -->
                <div class="hero-section" style="background-image: url('../images/background.png'); background-size: cover; background-position: center; height: 400px; margin-bottom: 40px; position: relative; border-radius: 12px; overflow: hidden;">
                    <div style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0, 0, 0, 0.3); display: flex; align-items: center; padding: 60px;">
                        <div style="max-width: 600px;">
                            <h1 style="font-size: 56px; font-weight: bold; margin-bottom: 20px; line-height: 1.1; color: white; text-shadow: 2px 2px 4px rgba(0,0,0,0.8);">MEET OUR<br>INSPIRING<br>MINISTERS</h1>
                            <p style="font-size: 24px; margin-bottom: 30px; color: #ccc; font-weight: 300; text-shadow: 1px 1px 2px rgba(0,0,0,0.8);">IN ONE PLACE</p>
                            <button onclick="focusLiveStreams()" style="background: #DC143C; color: white; border: none; padding: 18px 40px; border-radius: 8px; font-size: 18px; cursor: pointer; font-weight: 600; transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(220, 20, 60, 0.4);" onmouseover="this.style.background='#B22222'" onmouseout="this.style.background='#DC143C'">Start Exploring</button>
                        </div>
                    </div>
                </div>

                <!-- Continue Watching Section -->
                <div class="section">
                    <div class="section-title">‚ñ∂Ô∏è Continue Watching</div>
                    <div class="carousel" id="continueWatchingCarousel">
                        <!-- Continue watching will be loaded here -->
                    </div>
                </div>


                <!-- Live Streams Section -->
                <div class="section">
                    <div class="section-title">üî¥ Live Streams</div>
                    <div class="carousel" id="liveStreamsCarousel">
                        <!-- Live streams will be loaded here -->
                    </div>
                </div>

                <!-- Premium Shows Section -->
                <div class="section">
                    <div class="section-title">‚≠ê Premium Shows</div>
                    <div class="carousel" id="premiumShowsCarousel">
                        <!-- Premium shows will be loaded here -->
                    </div>
                </div>

                <!-- All Shows Section -->
                <div class="section">
                    <div class="section-title">üì∫ All Shows & Episodes</div>
                    <div class="carousel" id="showsCarousel">
                        <!-- Shows will be loaded here -->
                    </div>
                </div>
            </div>

            <!-- Episode List Screen -->
            <div class="episode-screen" id="episodeScreen">
                <div class="episode-header">
                    <button class="back-button" onclick="showMainScreen()">‚Üê Back</button>
                    <div class="show-info">
                        <h2 id="episodeShowTitle">Show Title</h2>
                        <div class="episode-count" id="episodeCount">0 episodes</div>
                    </div>
                </div>
                <div class="episodes-list" id="episodesList">
                    <!-- Episodes will be loaded here -->
                </div>
            </div>

            <!-- About Screen -->
            <div class="about-screen" id="aboutScreen">
                <div class="episode-header">
                    <button class="back-button" onclick="showMainScreen()">‚Üê Back</button>
                    <div class="show-info">
                        <h2>About Greater Love Network</h2>
                    </div>
                </div>
                <div class="about-content" style="padding: 0; max-width: 100%; overflow-y: auto;">
                    <!-- About Us Top Image with Text Overlay -->
                    <div style="position: relative; margin-bottom: 40px;">
                        <img src="../images/about_us_top.png" alt="About Us Top" style="width: 100%; height: 400px; object-fit: cover;" onerror="this.style.display='none';">
                        <div style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.4); display: flex; align-items: center; justify-content: center;">
                            <h1 style="color: white; font-size: 48px; font-weight: bold; text-align: center; text-shadow: 2px 2px 4px rgba(0,0,0,0.8);">ABOUT GREATER LOVE<br>NETWORK TV</h1>
                        </div>
                    </div>
                    <div style="padding: 40px;">
                        <!-- Mission Section -->
                        <div style="display: flex; gap: 60px; margin-bottom: 40px; align-items: flex-start;">
                            <div style="flex: 1;">
                                <h3 style="color: white; font-size: 24px; margin-bottom: 20px; font-weight: bold;">OUR MISSION & VISION</h3>
                                <p style="font-size: 16px; line-height: 1.6; margin-bottom: 20px; color: #ccc;">Greater Love Network Television Network has a singular goal: to reach souls with the good news of Jesus Christ.</p>
                                <p style="font-size: 14px; line-height: 1.6; margin-bottom: 20px; color: #aaa;">We seek out every available means of distribution to a world in need of hope. With an extensive blend of interdenominational and multi-cultural programming, we are committed to producing quality television that will reach our viewers, refresh their lives, and renew their hearts.</p>
                                <button style="background: #DC143C; color: white; border: none; padding: 12px 24px; border-radius: 4px; font-size: 14px; cursor: pointer; margin-top: 20px;">CONTACT US</button>
                            </div>
                            <div style="flex: 1;">
                                <img src="../images/about_us_bottom.jpg" alt="About Us" style="width: 100%; height: 300px; object-fit: cover; border-radius: 8px;" onerror="this.style.display='none';">
                            </div>
                        </div>

                        <!-- Help Others Section -->
                        <div style="text-align: center; margin: 60px 0;">
                            <p style="color: #DC143C; font-size: 14px; margin-bottom: 10px; text-transform: uppercase; letter-spacing: 1px;">DONATE NOW</p>
                            <h2 style="color: white; font-size: 36px; font-weight: bold; margin-bottom: 20px;">HELP OTHERS STAND STRONG IN FAITH</h2>
                            <p style="color: #ccc; font-size: 16px; line-height: 1.6; max-width: 800px; margin: 0 auto 30px;">Around the world, and right where you live people are desperate for something that will bring them peace, purpose, and a buffer from the confusion all around them. Of course the only answer is Jesus. And here at TBN, through the partnership of friends like you, we're taking the message of His salvation and hope to nations around the world. Your generosity will help us meet the overwhelming content designed to help you grow stronger in the Lord.</p>
                            <button style="background: #DC143C; color: white; border: none; padding: 15px 30px; border-radius: 4px; font-size: 16px; cursor: pointer; font-weight: bold;">GREATER LOVE</button>
                        </div>

                        <!-- Thank You Section -->
                        <div style="text-align: center; margin: 40px 0;">
                            <h3 style="color: white; font-size: 24px; margin-bottom: 20px;">THANK YOU FOR STANDING WITH US!</h3>
                            <button style="background: white; color: #333; border: none; padding: 12px 24px; border-radius: 4px; font-size: 14px; cursor: pointer;">DONATE NOW</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Loading Indicator -->
            <div class="loading" id="loadingSpinner" style="display: none;">
                <div class="spinner"></div>
            </div>
        </div>

        <!-- Remote Control -->
        <div class="remote-control">
            <div class="remote-title">Roku Remote Simulator</div>

            <div class="d-pad">
                <button class="remote-btn up" onclick="handleRemoteKey('ArrowUp')">‚Üë</button>
                <button class="remote-btn down" onclick="handleRemoteKey('ArrowDown')">‚Üì</button>
                <button class="remote-btn left" onclick="handleRemoteKey('ArrowLeft')">‚Üê</button>
                <button class="remote-btn right" onclick="handleRemoteKey('ArrowRight')">‚Üí</button>
                <button class="remote-btn ok" onclick="handleRemoteKey('Enter')">OK</button>
            </div>

            <div class="control-buttons">
                <button class="control-btn home" onclick="handleRemoteKey('Home')">üè† Home</button>
                <button class="control-btn back" onclick="handleRemoteKey('Escape')">‚Üê Back</button>
                <button class="control-btn" onclick="handleRemoteKey(' ')">‚ñ∂Ô∏è Play</button>
                <button class="control-btn" onclick="loadRealData()">üîÑ Reload API</button>
                <button class="control-btn" onclick="prevPage()">‚óÄ Prev Page</button>
                <button class="control-btn" onclick="nextPage()">Next Page ‚ñ∂</button>
                <button class="control-btn" onclick="debugAPIData()">üêõ Debug API</button>
                <button class="control-btn" onclick="testEpisodeURL()">üß™ Test Episode</button>
            </div>

            <!-- Status Display -->
            <div class="status-display">
                <h4>API Status</h4>
                <div class="api-status" id="apiStatus">Ready to test</div>
                <div class="api-status" id="showCount">Shows: 0</div>
                <div class="api-status" id="streamCount">Streams: 0</div>
            </div>
        </div>
    </div>

    <!-- QR Code Modal -->
    <div class="qr-modal" id="qrModal" onclick="closeQRModal()">
        <div class="qr-modal-content" onclick="event.stopPropagation()">
            <div class="qr-modal-header">
                <button class="back-button" onclick="closeQRModal()">‚Üê Back</button>
                <h2>Connect With Greater Love Network</h2>
            </div>

            <div class="qr-modal-body">
                <div class="qr-grid">
                    <div class="qr-card">
                        <img src="../images/donate_qrcode.png" alt="Donate QR Code" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjIwMCIgaGVpZ2h0PSIyMDAiIGZpbGw9IiNEQzE0M0MiLz48dGV4dCB4PSIxMDAiIHk9IjEwNSIgZmlsbD0id2hpdGUiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtc2l6ZT0iMjAiPkRvbmF0ZTwvdGV4dD48L3N2Zz4='">
                        <h3>Donate</h3>
                        <p>Support our ministry</p>
                    </div>
                    <div class="qr-card">
                        <img src="../images/tell_your_story_qrcode.png" alt="Tell Your Story QR Code" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjIwMCIgaGVpZ2h0PSIyMDAiIGZpbGw9IiNEQzE0M0MiLz48dGV4dCB4PSIxMDAiIHk9IjEwNSIgZmlsbD0id2hpdGUiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtc2l6ZT0iMTYiPlN0b3J5PC90ZXh0Pjwvc3ZnPg=='">
                        <h3>Tell Your Story</h3>
                        <p>Share your testimony</p>
                    </div>
                    <div class="qr-card">
                        <img src="../images/prayer_request_qrcode.png" alt="Prayer Request QR Code" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjIwMCIgaGVpZ2h0PSIyMDAiIGZpbGw9IiNEQzE0M0MiLz48dGV4dCB4PSIxMDAiIHk9IjEwNSIgZmlsbD0id2hpdGUiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtc2l6ZT0iMTYiPlByYXllcjwvdGV4dD48L3N2Zz4='">
                        <h3>Prayer Request</h3>
                        <p>Submit prayer requests</p>
                    </div>
                    <div class="qr-card">
                        <img src="../images/download_mobile_app_qrcode.png" alt="Download Mobile App QR Code" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjIwMCIgaGVpZ2h0PSIyMDAiIGZpbGw9IiNEQzE0M0MiLz48dGV4dCB4PSIxMDAiIHk9IjEwNSIgZmlsbD0id2hpdGUiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtc2l6ZT0iMTQiPkFwcDwvdGV4dD48L3N2Zz4='">
                        <h3>Download Mobile App</h3>
                        <p>Get our mobile app</p>
                    </div>
                </div>
            </div>

            <div class="modal-footer">
                <button class="close-modal" onclick="closeQRModal()">Done</button>
            </div>
        </div>
    </div>

    <!-- Video Player Overlay -->
    <div class="video-player-overlay" id="videoPlayerOverlay">
        <div class="video-player-header">
            <button class="video-back-button" onclick="closeVideoPlayer()">‚Üê Back</button>
            <div>
                <h2 class="video-title" id="videoTitle">Loading...</h2>
                <p class="video-subtitle" id="videoSubtitle">Preparing stream...</p>
            </div>
            <div class="live-indicator" id="liveIndicator" style="display: none;">
                <div class="live-dot"></div>
                LIVE
            </div>
        </div>

        <div class="video-container">
            <div class="video-player" id="videoPlayer">
                <!-- Video content will be loaded here -->
            </div>

            <div class="video-loading" id="videoLoading">
                <div class="spinner"></div>
                <span>Loading stream...</span>
            </div>

            <div class="video-error" id="videoError" style="display: none;">
                <h3>Unable to Load Stream</h3>
                <p>There was an issue loading this content. Please try again or select a different stream.</p>
                <button class="video-back-button" onclick="closeVideoPlayer()">Return to Menu</button>
            </div>
        </div>

        <div class="video-controls" id="videoControls" style="display: none;">
            <button class="play-pause-btn" id="playPauseBtn" onclick="togglePlayPause()">‚è∏Ô∏è Pause</button>
            <div class="volume-control">
                <span style="color: white; font-size: 14px;">üîä</span>
                <input type="range" class="volume-slider" id="volumeSlider" min="0" max="100" value="50" onchange="setVolume(this.value)">
            </div>
            <div style="flex: 1;"></div>
            <button class="video-back-button" onclick="closeVideoPlayer()">Exit Fullscreen</button>
        </div>
    </div>

    <script>
        // API Configuration - EXACT from your provided data
        const API_BASE = 'https://api.castr.com/v2';
        const ACCESS_TOKEN = '5aLoKjrNjly4';
        const SECRET_KEY = 'UjTCq8wOj76vjXznGFzdbMRzAkFq6VlJElBQ';
        const AUTH_HEADER = 'Basic ' + btoa(ACCESS_TOKEN + ':' + SECRET_KEY);

        // App State
        let currentScreen = 'home';
        let shows = [];
        let allShows = []; // Store all shows for pagination
        let liveStreams = [];
        let currentShow = null;
        let currentFocus = 0;
        let focusableElements = [];
        let currentPage = 1;
        let totalPages = 6;
        let totalShows = 51;

        // Initialize the simulator
        function init() {
            console.log('üöÄ Initializing Greater Love TV Simulator');
            setupKeyboardControls();
            loadMockData();
            loadRealData();
            updateFocus();
        }

        // Load mock data for immediate testing
        function loadMockData() {
            // Mock live streams
            liveStreams = [
                {
                    name: "Greater Love TV I",
                    enabled: true,
                    hls_url: "https://rpn.bozztv.com/dvrfl03/itv04060/index.m3u8",
                    image: "../images/GL_live_1.png"
                },
                {
                    name: "Greater Love TV II",
                    enabled: true,
                    hls_url: "https://rpn.bozztv.com/dvrfl04/itv04019/index.m3u8",
                    image: "../images/GL_live_2.png"
                }
            ];

            // Mock shows with better data
            shows = [
                {
                    name: "Truth That Matters",
                    enabled: true,
                    data: [
                        {enabled: true, fileName: "Truth That Matters - Episode 1.mp4", creationTime: "2024-01-15T10:00:00.000Z", mediaInfo: {durationMins: 30}, playback: {embed_url: "https://player.castr.com/vod/truth1"}},
                        {enabled: true, fileName: "Truth That Matters - Episode 2.mp4", creationTime: "2024-01-22T10:00:00.000Z", mediaInfo: {durationMins: 35}, playback: {embed_url: "https://player.castr.com/vod/truth2"}}
                    ],
                    episodeCount: 2
                },
                {
                    name: "CT Townsend - Fresh Oil",
                    enabled: true,
                    data: [
                        {enabled: true, fileName: "Fresh Oil - Episode 1.mp4", creationTime: "2024-01-10T09:00:00.000Z", mediaInfo: {durationMins: 45}, playback: {embed_url: "https://player.castr.com/vod/fresh1"}}
                    ],
                    episodeCount: 1
                },
                {
                    name: "Sandra Hancock - Voice of Hope",
                    enabled: true,
                    data: [
                        {enabled: true, fileName: "Voice of Hope - Episode 1.mp4", creationTime: "2024-01-05T11:00:00.000Z", mediaInfo: {durationMins: 25}, playback: {embed_url: "https://player.castr.com/vod/voice1"}}
                    ],
                    episodeCount: 1
                },
                {
                    name: "Ignited Church Services",
                    enabled: true,
                    data: [
                        {enabled: true, fileName: "Sunday Service - January 2024.mp4", creationTime: "2024-01-07T19:00:00.000Z", mediaInfo: {durationMins: 60}, playback: {embed_url: "https://player.castr.com/vod/ignited1"}}
                    ],
                    episodeCount: 1
                },
                {
                    name: "Grace Pointe Fellowship",
                    enabled: true,
                    data: [
                        {enabled: true, fileName: "Grace Pointe - Worship Service.mp4", creationTime: "2024-01-12T18:00:00.000Z", mediaInfo: {durationMins: 50}, playback: {embed_url: "https://player.castr.com/vod/grace1"}}
                    ],
                    episodeCount: 1
                },
                {
                    name: "Second Chances Ministry",
                    enabled: true,
                    data: [
                        {enabled: true, fileName: "Second Chances - Testimony.mp4", creationTime: "2024-01-08T16:00:00.000Z", mediaInfo: {durationMins: 40}, playback: {embed_url: "https://player.castr.com/vod/second1"}}
                    ],
                    episodeCount: 1
                }
            ];

            renderContent();
            updateCounts();
        }

        // Load real data from Greater Love TV API
        async function loadRealData() {
            setApiStatus('pending', 'Loading API data...');
            console.log('üîÑ Starting to load API data...');

            // Use stored API response data directly (more reliable for demo)
            console.log('üì¶ Using stored API data for reliable demo experience...');

            // Fallback to stored API response data
            // YOUR LIVE API RESPONSE DATA - Real Current Data from Greater Love TV API
            const realApiData = {
                "status": "success",
                "total_shows": 53,
                "data": {
                    "Anthony Wynn Ministries - sitdown sermons": {
                        "image_url": "https://greaterlove.tv/wp-content/uploads/2025/08/Anthony-Wynn-Sit-Down-Sermons-Square-2048x2048.png",
                        "episodes": [
                            {
                                "id": 268,
                                "show_name": "Anthony Wynn Ministries - sitdown sermons",
                                "episode_name": "Covenant",
                                "embed_url": "https://player.castr.com/vod/h1JFajzAqtFZqX73",
                                "direct_url": "https://cstr-vod.castr.com/videos/vde78135f060b411f0bcee/h1JFajzAqtFZqX73.mp4/index.m3u8",
                                "created_at": "2025-10-24 09:41:50"
                            },
                            {
                                "id": 269,
                                "show_name": "Anthony Wynn Ministries - sitdown sermons",
                                "episode_name": "Heaven's Gift Shop",
                                "embed_url": "https://player.castr.com/vod/ZLxxnAYEJmQ8N1lX",
                                "direct_url": "https://cstr-vod.castr.com/videos/vde78135f060b411f0bcee/ZLxxnAYEJmQ8N1lX.mp4/index.m3u8",
                                "created_at": "2025-10-24 09:41:50"
                            },
                            {
                                "id": 270,
                                "show_name": "Anthony Wynn Ministries - sitdown sermons",
                                "episode_name": "My Need of Jesus",
                                "embed_url": "https://player.castr.com/vod/MepUlQIafBoNBrIG",
                                "direct_url": "https://cstr-vod.castr.com/videos/vde78135f060b411f0bcee/MepUlQIafBoNBrIG.mp4/index.m3u8",
                                "created_at": "2025-10-24 09:41:51"
                            }
                        ]
                    },
                    "Better Life Now": {
                        "image_url": "https://greaterlove.tv/wp-content/uploads/2025/09/Eddie-Smith-Square-2048x2048.webp",
                        "episodes": [
                            {
                                "id": 13,
                                "show_name": "Better Life Now",
                                "episode_name": "The Miracles I Have Seen - Part 6",
                                "embed_url": "https://player.castr.com/vod/du0ObLeWpX0AMvBb",
                                "direct_url": "https://cstr-vod.castr.com/videos/vd8142b7307f5b11f09093/du0ObLeWpX0AMvBb.mp4/index.m3u8",
                                "created_at": "2025-10-24 08:11:57"
                            },
                            {
                                "id": 14,
                                "show_name": "Better Life Now",
                                "episode_name": "The Miracles I Have Seen - Part 5",
                                "embed_url": "https://player.castr.com/vod/UkvihRSCf7wo5ciU",
                                "direct_url": "https://cstr-vod.castr.com/videos/vd8142b7307f5b11f09093/UkvihRSCf7wo5ciU.mp4/index.m3u8",
                                "created_at": "2025-10-24 08:11:58"
                            }
                        ]
                    },
                    "Kevin Wallace Ministries": {
                        "image_url": "https://greaterlove.tv/wp-content/uploads/2025/09/Kevin-Wallace-Square-2048x2048.webp",
                        "episodes": [
                            {
                                "id": 5,
                                "show_name": "Kevin Wallace Ministries",
                                "episode_name": "Beyond the Roman Road: Part 4",
                                "embed_url": "https://player.castr.com/vod/lsbvWsOi76xbDtu0",
                                "direct_url": "https://cstr-vod.castr.com/videos/vd2a23f8e0926811f0a87a/lsbvWsOi76xbDtu0.mp4/index.m3u8",
                                "created_at": "2025-10-24 08:11:50"
                            },
                            {
                                "id": 6,
                                "show_name": "Kevin Wallace Ministries",
                                "episode_name": "Beyond the Roman Road: Part 3",
                                "embed_url": "https://player.castr.com/vod/gjcD9qP6ZIVeHaCW",
                                "direct_url": "https://cstr-vod.castr.com/videos/vd2a23f8e0926811f0a87a/gjcD9qP6ZIVeHaCW.mp4/index.m3u8",
                                "created_at": "2025-10-24 08:11:51"
                            }
                        ]
                    },
                    "Fresh Oil": {
                        "image_url": "https://greaterlove.tv/wp-content/uploads/2025/09/Josh-and-Emily-Bowman-Fresh-Oil-Square-2048x2048.webp",
                        "episodes": [
                            {
                                "id": 94,
                                "show_name": "Fresh Oil",
                                "episode_name": "Judah was His Sanctuary, Israel was His Dominion: Part 2",
                                "embed_url": "https://player.castr.com/vod/5sVjCTVc2PTzpEFJ",
                                "direct_url": "https://cstr-vod.castr.com/videos/vdd10d69c06d6f11f0a0d6/5sVjCTVc2PTzpEFJ.mp4/index.m3u8",
                                "created_at": "2025-10-24 09:30:20"
                            },
                            {
                                "id": 95,
                                "show_name": "Fresh Oil",
                                "episode_name": "Judah was His Sanctuary, Israel was His Dominion: Part 1",
                                "embed_url": "https://player.castr.com/vod/8ae2rGvMCx5mx3AT",
                                "direct_url": "https://cstr-vod.castr.com/videos/vdd10d69c06d6f11f0a0d6/8ae2rGvMCx5mx3AT.mp4/index.m3u8",
                                "created_at": "2025-10-24 09:30:21"
                            }
                        ]
                    },
                    "Kingdom Builders": {
                        "image_url": "https://greaterlove.tv/wp-content/uploads/2025/08/Garland-and-Farida-Mays-Kingdom-Builders-Square-2048x2048.png",
                        "episodes": [
                            {
                                "id": 180,
                                "show_name": "Kingdom Builders",
                                "episode_name": "Detox",
                                "embed_url": "https://player.castr.com/vod/H5PROKqeFuOC11Fk",
                                "direct_url": "https://cstr-vod.castr.com/videos/vd1981e510671611f0b402/H5PROKqeFuOC11Fk.mp4/index.m3u8",
                                "created_at": "2025-10-24 09:36:16"
                            },
                            {
                                "id": 181,
                                "show_name": "Kingdom Builders",
                                "episode_name": "Giving",
                                "embed_url": "https://player.castr.com/vod/IhtvlQMAodBahqoo",
                                "direct_url": "https://cstr-vod.castr.com/videos/vd1981e510671611f0b402/IhtvlQMAodBahqoo.mp4/index.m3u8",
                                "created_at": "2025-10-24 09:36:17"
                            }
                        ]
                    },
                    "Keith Nix Ministries": {
                        "image_url": "https://greaterlove.tv/wp-content/uploads/2025/08/Keith-Nix-Keith-Nix-Ministries-Square-2048x2048.webp",
                        "episodes": [
                            {
                                "id": 200,
                                "show_name": "Keith Nix Ministries",
                                "episode_name": "Losing Jesus In Church 1.mp4",
                                "embed_url": "https://player.castr.com/vod/UE5ZGnpm78mrwwsu",
                                "direct_url": "https://cstr-vod.castr.com/videos/vde16f336066f411f0b5cf/UE5ZGnpm78mrwwsu.mp4/index.m3u8",
                                "created_at": "2025-10-24 09:36:31"
                            },
                            {
                                "id": 201,
                                "show_name": "Keith Nix Ministries",
                                "episode_name": "Losing Jesus In Church 2.mp4",
                                "embed_url": "https://player.castr.com/vod/zuEWOfOsc2YevQsb",
                                "direct_url": "https://cstr-vod.castr.com/videos/vde16f336066f411f0b5cf/zuEWOfOsc2YevQsb.mp4/index.m3u8",
                                "created_at": "2025-10-24 09:36:31"
                            }
                        ]
                    }
                }
            };

            // Use Greater Love TV API data structure
            if (realApiData.status === "success" && realApiData.data) {
                // Convert new API format to compatible format
                allShows = Object.keys(realApiData.data).map(showName => {
                    const showData = realApiData.data[showName];
                    return {
                        _id: showName.replace(/\s+/g, '_').toLowerCase(),
                        name: showName,
                        enabled: true,
                        type: "vod",
                        image_url: showData.image_url,
                        data: showData.episodes.map(episode => ({
                            enabled: true,
                            id: episode.id.toString(),
                            fileName: episode.episode_name,
                            playback: {
                                embed_url: episode.embed_url,
                                direct_url: episode.direct_url
                            },
                            creationTime: episode.created_at,
                            author: "greaterlove.tv"
                        })),
                        episodeCount: showData.episodes ? showData.episodes.length : 0
                    };
                });
            } else {
                // Fallback to old format if needed
                allShows = realApiData.docs ? realApiData.docs.map(show => ({
                        ...show,
                        episodeCount: show.data ? show.data.filter(ep => ep.enabled).length : 0
                })) : [];
            }

                    shows = allShows.slice(0, 10);
            totalShows = realApiData.total_shows || realApiData.total || allShows.length;
            totalPages = realApiData.pages || 1;

            console.log('‚úÖ Using comprehensive API data from Greater Love TV API - Anthony Wynn Ministries, Better Life Now, Kevin Wallace Ministries, Fresh Oil, Kingdom Builders, Keith Nix Ministries + more');
            setApiStatus('success', `‚úÖ Loaded complete API data (${shows.length}/${totalShows} shows from Greater Love TV API)`);

            // Use YOUR exact live stream data from iOS app
            liveStreams = [
                {
                    "_id": "static_channel_1",
                    "name": "Greater Love TV Channel 1",
                    "enabled": true,
                    "creation_time": "2025-01-01T00:00:00.000Z",
                    "embed_url": "https://swf.tulix.tv/iframe/greaterlove/",
                    "hls_url": "https://rpn.bozztv.com/dvrfl03/itv04060/index.m3u8",
                    "thumbnail_url": "../images/GL_live_1.png",
                    "image": "../images/GL_live_1.png",
                    "broadcasting_status": "online",
                    "playback": {
                        "hls_url": "https://rpn.bozztv.com/dvrfl03/itv04060/index.m3u8",
                        "embed_url": "https://swf.tulix.tv/iframe/greaterlove/"
                    }
                },
                {
                    "_id": "static_channel_2",
                    "name": "Greater Love TV Channel 2",
                    "enabled": true,
                    "creation_time": "2025-01-01T00:00:00.000Z",
                    "embed_url": "https://swf.tulix.tv/iframe/greaterlove2/",
                    "hls_url": "https://rpn.bozztv.com/dvrfl04/itv04019/index.m3u8",
                    "thumbnail_url": "../images/GL_live_2.png",
                    "image": "../images/GL_live_2.png",
                    "broadcasting_status": "online",
                    "playback": {
                        "hls_url": "https://rpn.bozztv.com/dvrfl04/itv04019/index.m3u8",
                        "embed_url": "https://swf.tulix.tv/iframe/greaterlove2/"
                    }
                }
            ];

            console.log('üîÑ Data loaded successfully');
            console.log('üì∫ Shows:', shows.length);
            console.log('üî¥ Live Streams:', liveStreams.length);
            console.log('üìä Total Shows Available:', totalShows);

                    renderContent();
                    updateCounts();
        }

        function debugAPIData() {
            console.log('üêõ === DEBUG API DATA ===');
            console.log('üì∫ Shows:', shows);
            console.log('üî¥ Live Streams:', liveStreams);
            console.log('üìä First Show Episodes:', shows[0]?.data || 'No episodes');
            console.log('üé¨ First Episode Playback:', shows[0]?.data?.[0]?.playback || 'No playback');

            // Show alert with debug info
            const debugInfo = `
API DEBUG INFO:
üì∫ Shows loaded: ${shows.length}
üî¥ Live streams: ${liveStreams.length}
üìä Total shows: ${totalShows}

First Show: ${shows[0]?.name || 'None'}
Episodes in first show: ${shows[0]?.data?.length || 0}
First episode: ${shows[0]?.data?.[0]?.fileName || 'None'}
Embed URL: ${shows[0]?.data?.[0]?.playback?.embed_url || 'None'}

Check console for full data details.
            `;
            alert(debugInfo);
        }

        function testEpisodeURL() {
            if (shows.length > 0 && shows[0].data && shows[0].data.length > 0) {
                const firstEpisode = shows[0].data[0];
                const embedUrl = firstEpisode.playback?.embed_url;

                if (embedUrl) {
                    // Test the URL in a new window
                    console.log('üß™ Testing episode URL:', embedUrl);
                    window.open(embedUrl, '_blank', 'width=800,height=600');
                } else {
                    alert('No embed URL found in first episode');
                }
            } else {
                alert('No shows or episodes available to test');
            }
        }

        function renderContent() {
            renderLiveStreams();
            renderPremiumShows();
            renderShows();
            updateFocusableElements();
        }

        function renderContinueWatching() {
            const container = document.getElementById('continueWatchingCarousel');
            container.innerHTML = '';

            // Mock continue watching data
            const continueWatching = [
                {
                    title: "Truth That Matters - Episode 1",
                    show: "Truth That Matters",
                    progress: 65,
                    image: "../images/app_logo.png"
                },
                {
                    title: "Fresh Oil - Episode 1",
                    show: "CT Townsend",
                    progress: 40,
                    image: "../images/app_logo.png"
                },
                {
                    title: "Voice of Hope - Episode 1",
                    show: "Sandra Hancock",
                    progress: 80,
                    image: "../images/app_logo.png"
                }
            ];

            // Render continue watching items
            continueWatching.forEach((item, index) => {
                const card = document.createElement('div');
                card.className = 'card';
                card.dataset.type = 'continue';
                card.dataset.index = index;

                card.innerHTML = `
                    <div style="position: relative;">
                        <img src="${item.image}"
                             alt="${item.title}"
                             onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjgwIiBoZWlnaHQ9IjE2MCIgdmlld0JveD0iMCAwIDI4MCAxNjAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjI4MCIgaGVpZ2h0PSIxNjAiIGZpbGw9IiMxQTIzMzIiLz48dGV4dCB4PSIxNDAiIHk9IjgwIiBmaWxsPSJ3aGl0ZSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1zaXplPSIxNCI+RXBpc29kZTwvdGV4dD48L3N2Zz4='">
                        <div style="position: absolute; bottom: 0; left: 0; right: 0; background: rgba(220,20,60,0.8); height: 4px;">
                            <div style="width: ${item.progress}%; background: #DC143C; height: 100%;"></div>
                        </div>
                    </div>
                    <div style="padding: 8px; background: rgba(0,0,0,0.7); color: white; font-size: 12px;">
                        <div style="font-weight: bold; margin-bottom: 4px;">${item.title}</div>
                        <div style="color: #ccc;">${item.show}</div>
                    </div>
                `;
                container.appendChild(card);
            });
        }

        function renderLiveStreams() {
            const container = document.getElementById('liveStreamsCarousel');
            container.innerHTML = '';

            liveStreams.forEach((stream, index) => {
                const card = document.createElement('div');
                card.className = 'card live-card';
                card.dataset.type = 'livestream';
                card.dataset.index = index;

                card.innerHTML = `
                    <img src="${stream.image || '../images/GL_live_1.png'}"
                         alt="${stream.name}"
                         onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjgwIiBoZWlnaHQ9IjE2MCIgdmlld0JveD0iMCAwIDI4MCAxNjAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjI4MCIgaGVpZ2h0PSIxNjAiIGZpbGw9IiMxQTIzMzIiLz48dGV4dCB4PSIxNDAiIHk9IjgwIiBmaWxsPSJ3aGl0ZSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1zaXplPSIxNCI+TG92ZTwvdGV4dD48L3N2Zz4='">
                    <div style="position: absolute; top: 8px; right: 8px; background: #DC143C; color: white; padding: 4px 8px; border-radius: 4px; font-size: 12px; font-weight: bold;">
                        üî¥ LIVE
                    </div>
                    <div style="position: absolute; bottom: 0; left: 0; right: 0; background: rgba(0,0,0,0.7); color: white; padding: 8px; font-size: 12px;">
                        <div style="font-weight: bold; margin-bottom: 4px;">${stream.name}</div>
                        <div style="color: #ccc;">Live Stream</div>
                    </div>
                `;
                container.appendChild(card);
            });
        }

        function renderPremiumShows() {
            const container = document.getElementById('premiumShowsCarousel');
            container.innerHTML = '';

            // Get the best shows (with most episodes) from actual API data as Premium Shows
            const showsWithEpisodes = shows.filter(show => 
                show.data && show.data.length > 0 && show.enabled
            );
            
            // Sort by episode count (descending) and take top 6 as premium
            const premiumShows = showsWithEpisodes
                .sort((a, b) => (b.data?.length || 0) - (a.data?.length || 0))
                .slice(0, 6);

            premiumShows.forEach((show, index) => {
                const card = document.createElement('div');
                card.className = 'card premium-card';
                card.dataset.type = 'premium';
                card.dataset.index = index;

                card.innerHTML = `
                    <img src="${show.image_url || '../images/app_logo.png'}"
                         alt="${show.name}"
                         onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjgwIiBoZWlnaHQ9IjE2MCIgdmlld0JveD0iMCAwIDI4MCAxNjAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjI4MCIgaGVpZ2h0PSIxNjAiIGZpbGw9IiMxQTIzMzIiLz48dGV4dCB4PSIxNDAiIHk9IjgwIiBmaWxsPSJ3aGl0ZSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1zaXplPSIxNCI+U2hvdzwvdGV4dD48L3N2Zz4='">
                    <div style="position: absolute; top: 8px; right: 8px; background: #FFD700; color: #000; padding: 4px 8px; border-radius: 4px; font-size: 12px; font-weight: bold;">
                        ‚≠ê PREMIUM
                    </div>
                    <div style="position: absolute; bottom: 0; left: 0; right: 0; background: rgba(0,0,0,0.7); color: white; padding: 8px; font-size: 12px;">
                        <div style="font-weight: bold; margin-bottom: 4px;">${show.name}</div>
                        <div style="color: #ccc;">${show.data?.length || 0} Episodes</div>
                    </div>
                `;
                container.appendChild(card);
            });
        }

        function renderShows() {
            const container = document.getElementById('showsCarousel');
            container.innerHTML = '';

            shows.slice(0, 10).forEach((show, index) => {
                const card = document.createElement('div');
                card.className = 'card';
                card.dataset.type = 'show';
                card.dataset.index = index;

                card.innerHTML = `
                    <img src="../images/app_logo.png"
                         alt="${show.name}"
                         onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjgwIiBoZWlnaHQ9IjE2MCIgdmlld0JveD0iMCAwIDI4MCAxNjAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjI4MCIgaGVpZ2h0PSIxNjAiIGZpbGw9IiMxQTIzMzIiLz48dGV4dCB4PSIxNDAiIHk9IjgwIiBmaWxsPSJ3aGl0ZSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1zaXplPSIxNCI+U2hvdzwvdGV4dD48L3N2Zz4='">
                    <div style="position: absolute; bottom: 0; left: 0; right: 0; background: rgba(0,0,0,0.7); color: white; padding: 8px; font-size: 12px;">
                        <div style="font-weight: bold; margin-bottom: 4px;">${show.name}</div>
                        <div style="color: #ccc;">${show.data?.length || 0} Episodes</div>
                    </div>
                `;
                container.appendChild(card);
            });
        }

        // Utility: update API status banner on the right panel
        function setApiStatus(type, message) {
            const statusEl = document.getElementById('apiStatus');
            if (!statusEl) return;
            // type: 'pending' | 'success' | 'error'
            statusEl.className = 'api-status ' + type;
            statusEl.textContent = message || '';
        }

        // Utility: update shows/streams counters on the right panel
        function updateCounts() {
            const showEl = document.getElementById('showCount');
            if (showEl) {
                const total = (typeof totalShows === 'number' && totalShows > 0) ? totalShows : shows.length;
                showEl.textContent = `Shows: ${shows.length}/${total}`;
            }
            const streamEl = document.getElementById('streamCount');
            if (streamEl) {
                streamEl.textContent = `Streams: ${liveStreams.length}`;
            }
        }

        function updateFocusableElements() {
            focusableElements = Array.from(document.querySelectorAll('.card'));
            if (currentFocus >= focusableElements.length) {
                currentFocus = 0;
            }
            updateFocus();
        }

        function updateFocus() {
            focusableElements.forEach((el, index) => {
                el.classList.toggle('focused', index === currentFocus);
            });
        }

        function moveFocus(direction) {
            if (focusableElements.length === 0) return;

            if (direction === 'up' || direction === 'down') {
                // Move between sections (simplified for demo)
                const step = direction === 'up' ? -3 : 3;
                currentFocus = Math.max(0, Math.min(focusableElements.length - 1, currentFocus + step));
            } else if (direction === 'left' || direction === 'right') {
                // Move within section
                const step = direction === 'left' ? -1 : 1;
                currentFocus = Math.max(0, Math.min(focusableElements.length - 1, currentFocus + step));
            }

            updateFocus();
        }

        function selectFocusedItem() {
            const focused = focusableElements[currentFocus];
            if (!focused) return;

            const type = focused.dataset.type;
            const index = focused.dataset.index;
            const action = focused.dataset.action;

            console.log(`üéØ Selected: ${type}`, {index, action});

            if (type === 'livestream') {
                playLiveStream(liveStreams[index]);
            } else if (type === 'show') {
                showEpisodeList(shows[index]);
            } else if (type === 'premium') {
                showEpisodeList(shows[index]);
            } else if (type === 'continue') {
                // Handle continue watching
                console.log('Continue watching:', index);
            }
        }

        function showEpisodeList(show) {
            console.log('üì∫ Showing episodes for:', show.name);
            document.getElementById('episodeListTitle').textContent = show.name;
            document.getElementById('episodeListSubtitle').textContent = show.description || 'Episodes';

            const episodes = show.data || show.episodes || [];
            const enabledEpisodes = episodes.filter(ep => ep.enabled);

            document.getElementById('episodeCount').textContent = `${enabledEpisodes.length} episodes`;

            const episodesList = document.getElementById('episodesList');
            episodesList.innerHTML = '';

            if (enabledEpisodes.length === 0) {
                episodesList.innerHTML = '<div style="text-align: center; padding: 40px; color: #ccc;">No episodes available</div>';
                return;
            }

            enabledEpisodes.forEach((episode, index) => {
                const episodeCard = document.createElement('div');
                episodeCard.className = 'episode-card';
                episodeCard.dataset.index = index;

                episodeCard.innerHTML = `
                    <div style="display: flex; align-items: center; padding: 12px; border-bottom: 1px solid #333;">
                        <div style="flex: 1;">
                            <div style="font-weight: bold; margin-bottom: 4px;">${episode.fileName}</div>
                            <div style="color: #ccc; font-size: 12px;">
                                ${episode.creationTime ? new Date(episode.creationTime).toLocaleDateString() : 'Unknown date'}
                            </div>
                        </div>
                        <div style="margin-left: 16px;">
                            <button onclick="playEpisode(${JSON.stringify(episode).replace(/"/g, '&quot;')}, '${show.name}')" 
                                    style="background: #DC143C; color: white; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer;">
                                ‚ñ∂ Play
                            </button>
                        </div>
                    </div>
                `;
                episodesList.appendChild(episodeCard);
            });

            // Show episode list
            document.getElementById('episodeListScene').style.display = 'block';
            document.getElementById('mainContent').style.display = 'none';
        }

        function playEpisode(episodeData, showName) {
            console.log('üì∫ Playing Episode:', episodeData.fileName);
            console.log('üîç Episode Data:', episodeData);

            // Show video player
            document.getElementById('videoPlayerOverlay').classList.add('active');

            // Set title and subtitle
            document.getElementById('videoTitle').textContent = episodeData.fileName.replace('.mp4', '');
            document.getElementById('videoSubtitle').textContent = showName;
            document.getElementById('liveIndicator').style.display = 'none';

            // Show loading
            document.getElementById('videoLoading').style.display = 'flex';
            document.getElementById('videoError').style.display = 'none';
            document.getElementById('videoControls').style.display = 'none';

            isLiveStream = false;

            const videoPlayer = document.getElementById('videoPlayer');
            videoPlayer.innerHTML = '';

            // Get video URL from episode data (prioritize direct_url for HLS)
            let videoUrl = null;
            if (episodeData.playback && episodeData.playback.direct_url) {
                videoUrl = episodeData.playback.direct_url;
                console.log('üé¨ Using Direct HLS URL:', videoUrl);
            } else if (episodeData.playback && episodeData.playback.embed_url) {
                videoUrl = episodeData.playback.embed_url;
                console.log('üé¨ Using Embed URL:', videoUrl);
            }

            console.log('üé¨ Video URL:', videoUrl);

            if (videoUrl) {
                // For Castr player URLs, show info placeholder directly due to web authentication issues
                if (videoUrl.includes('player.castr.com/vod/') || videoUrl.includes('cstr-vod.castr.com')) {
                    console.log('üîß Castr URL detected - showing info placeholder for web testing:', videoUrl);
                    showEpisodeInfoPlaceholder(episodeData, showName);
                } else {
                    // For other URLs, try direct iframe
                    console.log('üîß Using direct iframe for non-Castr URL:', videoUrl);

                    const iframe = document.createElement('iframe');
                    iframe.src = videoUrl;
                    iframe.style.width = '100%';
                    iframe.style.height = '100%';
                    iframe.style.border = 'none';
                    iframe.allow = 'autoplay; fullscreen';
                    iframe.setAttribute('allowfullscreen', '');
                    videoPlayer.appendChild(iframe);

                    // Hide loading after a short delay (iframe might not trigger load event reliably)
                    setTimeout(() => {
                        document.getElementById('videoLoading').style.display = 'none';
                        document.getElementById('videoControls').style.display = 'flex';
                    }, 2000); // Adjust delay as needed
                }
            } else {
                console.error('‚ùå No video URL found for episode:', episodeData);
                document.getElementById('videoLoading').style.display = 'none';
                document.getElementById('videoError').style.display = 'flex';
                document.getElementById('videoErrorMessage').textContent = 'Error: No video URL found for this episode.';
            }
        }

        function showEpisodeInfoPlaceholder(episodeData, showName) {
            console.log('üìÑ Showing episode info placeholder');
            document.getElementById('videoLoading').style.display = 'none';
            document.getElementById('videoError').style.display = 'none';

            const videoPlayer = document.getElementById('videoPlayer');
            videoPlayer.innerHTML = `
                <div style="display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100%; color: white; text-align: center; padding: 40px; background: linear-gradient(135deg, #1A2332 0%, #0F1419 100%);">
                    <div style="background: rgba(220, 20, 60, 0.1); border: 2px solid #DC143C; border-radius: 12px; padding: 30px; max-width: 600px;">
                        <h3 style="color: #DC143C; margin-bottom: 20px; font-size: 24px;">üì∫ ${episodeData.fileName.replace('.mp4', '')}</h3>
                        <p style="margin-bottom: 15px; color: #ccc; font-size: 18px;">Show: <strong>${showName}</strong></p>
                        <p style="margin-bottom: 15px; color: #ccc;">Duration: <strong>${episodeData.mediaInfo?.durationMins || 'Unknown'} minutes</strong></p>
                        <p style="margin-bottom: 15px; color: #aaa; font-size: 14px;">File Size: ${Math.round((episodeData.bytes || 0) / 1024 / 1024)} MB</p>
                        <p style="margin-bottom: 20px; color: #aaa; font-size: 14px;">Created: ${new Date(episodeData.creationTime).toLocaleDateString()}</p>

                        <div style="background: rgba(0,0,0,0.3); padding: 20px; border-radius: 8px; margin: 20px 0;">
                            <p style="margin-bottom: 15px; color: #DC143C; font-weight: bold;">‚úÖ Episode Ready for Roku App</p>
                            <p style="margin-bottom: 10px; color: #10B981; font-size: 14px;">‚úì Episode exists in Greater Love TV API</p>
                            <p style="margin-bottom: 10px; color: #10B981; font-size: 14px;">‚úì Direct HLS URL is available</p>
                            <p style="margin-bottom: 10px; color: #10B981; font-size: 14px;">‚úì Embed URL is available</p>
                            <p style="margin-bottom: 15px; color: #aaa; font-size: 12px;">Web browsers have CORS restrictions for Castr player. This episode will play perfectly in the actual Roku TV app using direct HLS streaming.</p>
                            <div style="background: rgba(16, 185, 129, 0.1); border: 1px solid #10B981; border-radius: 6px; padding: 10px; margin: 10px 0;">
                                <p style="color: #10B981; font-size: 12px; margin: 0;"><strong>‚úì Production Ready:</strong> This episode is configured correctly for Roku deployment with HLS streaming</p>
                            </div>
                            ${episodeData.playback?.direct_url ? `<p style="color: #10B981; font-size: 11px; word-break: break-all; margin-top: 10px;"><strong>Direct HLS URL:</strong> ${episodeData.playback.direct_url}</p>` : ''}
                            ${episodeData.playback?.embed_url ? `<p style="color: #888; font-size: 11px; word-break: break-all; margin-top: 5px;">Embed URL: ${episodeData.playback.embed_url}</p>` : '<p style="color: #DC143C;">‚ö†Ô∏è No embed URL found</p>'}
                        </div>

                        <button onclick="testEpisodeInNewWindow('${episodeData.playback?.embed_url || ''}')" style="background: #DC143C; color: white; border: none; padding: 12px 24px; border-radius: 6px; font-size: 14px; cursor: pointer; margin-right: 10px;">üß™ Test in New Window</button>
                        <button onclick="closeVideoPlayer()" style="background: #666; color: white; border: none; padding: 12px 24px; border-radius: 6px; font-size: 14px; cursor: pointer;">‚Üê Back to Episodes</button>
                    </div>
                </div>
            `;
        }

        function testEpisodeInNewWindow(embedUrl) {
            if (embedUrl) {
                console.log('üß™ Testing episode URL in new window:', embedUrl);
                window.open(embedUrl, '_blank', 'width=800,height=600');
            } else {
                alert('No embed URL available for testing');
            }
        }

        // Initialize on load
        window.addEventListener('load', init);
    </script>
</body>
</html>
